     一、研究目标、研究内容与技术指标
     （一）研究目标
     针对舰船装备总体及复杂系统设备测试性指标及诊断方案论证、设计、试验、评估等需求，研究提出一种以原理图、接线图、传动图等为输入信息的智能化、可校核的测试性建模方法，支持装备测试性模型的自动化生成和即时评价。以新型测试模型和测试性分析评价理论为基础，研究提出基于测试性复杂性、测试代价、测试次数等因素的交互式诊断方案通用生成方法。研制测试性建模与交互式故障诊断一体化集成开发环境软件，构建舰船典型装备的交互式故障诊断演示系统，支持典型复杂机电液装备（器件和连接点规模不小于10000个）的测试性建模与分析、交互式诊断方案生成等核心功能，实现测试性分析时间小于10秒，交互式引导测试单步推理时间小于1秒，任意单点故障条件下交互式引导测试可100%定位理论可达的最小模糊故障组等技术指标。技术成熟度达到5级。
     （二）研究内容
      项目重点围绕复杂机电液装备的自动化测试性建模、智能化诊断方案生成、交互式测试引导等关键技术开展研究工作，主要研究内容及相互关系如图1-1所示。

图1-1 研究内容及相关关系
     1. 舰船装备集成设计和智能测试建模技术研究
     针对装备测试性“设计、评估”一体化目标，结合舰船装备总体及复杂系统设备在设计阶段科学合理开展测试性设计与评价的实际情况和具体需求，研究测试性方案论证、设计、试验、评估等各阶段的技术要求，据此开展智能化测试性建模与交互式故障诊断系统的需求分解和总体设计。提出一种便于描述输入和输出端口之间耦合、传递、变换和控制关系的测试性描述语言（T语言）。在此基础上，以原理图、接线图、传动图等为输入信息，基于系统中实际连接关系（管道、电缆、传动轴等）自动生成测试性模型，该模型维持装备的整体结构和组成关系，解决现有测试性建模方法建模结果不唯一、通用性差的问题。分层模型的智能整合技术实现从底层到高层级系统的逐级抽象和整合，确保在舰船装备总体等复杂装备中实现精准且高效的测试性分析，进一步增强了整个系统的协同性和效率。它通过整合故障模式和测试手段，有效地提升了系统级测试性模型的可靠性和实用性，从而满足舰船装备设计与评估的一体化需求。
     （1）舰船装备测试性设计、评估一体化需求分析
     （2）基于T语言的信号-功能关联图测试性模型生成技术
     （3）分层模型的智能整合技术
     2. 舰船装备测试性模型自动分析和智能校核技术研究
     机电液系统的测试性评价和优化可以与系统设计过程紧密耦合，在系统设计过程中，根据测试性模型所定义的系统组成和连接关系、测试点布局等基础信息，自动形成测试性报告，为装备方案设计阶段的测试性评价和优化提供建议。本项目基于所建立的测试性模型实现系统详细设计方案与测试性模型的一致性校核、测试性设计的量化评价及在线/人工测点的布局优化，解决现有测试性建模方法建模难校核的问题。
     （1）测试性模型自动分析和智能校核技术
     （2）装备测试性量化评价与测点布局优化技术
     3. 基于测试性模型的诊断方案智能生成技术研究
     机电液部件的信号-功能关联图测试模型包含了实际装备中全部的机电液部件和与实际装备一致的机电液部件之间的连接关系。在故障条件下，可观测的故障是由于系统中机电液部件或其连接的一点或多点故障导致的，最终通过系统的耦合传递关系表现出可以观测的故障现象和故障征兆。故障诊断和定位的目的实际上是针对上述过程的逆向追溯和求解的过程。由于实际系统中装备的信号存在复杂的传递、耦合、变换、控制等相互作用关系，所以导致故障定位过程非常困难。针对装备测试“诊断决策”智能化目标，提出基于测试复杂性、测试代价、测试次数等因素的诊断方案智能化生成方法，实现依据可观测的故障现象分割确定故障关联网络和机电液部件（形成诊断子图），并基于关联网络的结构和内部信号传递关系和作用关系定位、隔离故障单元的目标。此外，为进一步提升诊断方案的智能化水平，该方法将整合先验故障概率等统计信息，运用机器学习与启发式优化算法，对诊断方案进行多目标智能优化。以测试复杂性、测试时间代价、测试成本代价、故障诊断概率、信息熵等偏好作为约束条件，实现测试行为的总体规划和人工测点的迭代优选。此外，以测试性模型和最优诊断方案为基础，采用图文等可视化手段，分步骤引导维修人员开展测试，为现场测试提供实时、形象的交互式引导，辅助判断测试结果，并基于在线和离线的反馈数据动态规划测试行为。
     （1）智能诊断方案生成与最优测点推荐技术
     （2）关键测试点隔离采样与实时诊断技术
     （3）实时图文引导的交互式诊断测试技术
     4. 复杂系统测试性模型与智能故障诊断方案测试验证技术研究
     研制复杂机电液装备的测试性建模与交互式故障诊断一体化集成开发环境，支持机电液部件的测试性建模、测试性评估、故障诊断方案优化、测试点动态决策、交互式图文引导，以及装备维修数据管理等核心功能。针对某型船水声释放回收系统或某型船集中油源动力系统建立基于信号-功能关联图的测试性模型，开展实时图文诊断测试试验验证，验证本项目的研究内容和关键技术。
     （1）测试性建模与交互式故障诊断一体化集成开发环境
     （2）复杂机电液装备交互式智能诊断试验验证
     （三）关键技术
      1. 基于T语言的智能化/可校核测试性建模方法
     提出一种以T语言描述功能模型为基础的复杂机电液系统统一建模方法，该方法以电气系统接线图、液压系统原理图和机械系统传动图为基础，自动生成相互耦合的复杂机电液系统测试模型。该模型以实际的电气连接、液压管道连接和机械传动关系为基础，具备唯一性、可校核性。基于T语言的智能化/可校核测试性建模方法克服了目前常用的机电液系统建模方法的建模结果不唯一、分类层次不清晰、系统模型难校核等缺点，所建立的基于信号-功能关联图的测试性模型为开展交互式图文引导测试和故障隔离定位提供了基础支持。
     2. 基于多参数约束的测点优化决策技术
     基于所定义的复杂机电液装备信号-功能关联图模型和实际观测到的故障现象，自动采用优化推理策略对所涉及的信号回路及其关联回路进行回溯，根据设定的测试偏好和测试约束（测试时间、测试代价、测试步数、测试可用工具等）自动优选最优测试节点，然后根据测试反馈信息自动判断系统状态，并优选下一步的测试内容和测试位置。基于对连接和传动关系、器件功能模型的动态解析，针对总体测试代价和单步测试信息熵构造综合评价函数，基于对目标函数优化的方法优选测点和规划测试步骤，可显著提升复杂装备故障的隔离和定位能力。
     3. 基于图文引导的交互式实时诊断测试技术
     本项目设计了一种交互式图文引导的实时辅助测试诊断软件和现场应用方案，可以支持信号-功能关联图模型的建模和导入分析，以测点的优化决策算法为基础，可实现故障隔离定位过程的逐步引导、提示和测试结果自动判决，根据反馈测试结果动态优化测试流程。该方案交互作用及时，提供引导信息丰富且极具针对性，可用于大型复杂装备的现场维修的快速故障分析和处理，有助于全面提升装备的保障性和可用性。
     （四） 技术指标
     1. 建模环境可支持机、电、液3种物理型形式的复杂装备集成建模和测试性评价，建模环境友好，操作响应及时。
     2. 建模环境基本器件库合计包含不小于10000个常用电气、电子和液压、机械元器件/部件的标准测试模型。支持非标准器件测试建模和校验。
     3. 支持舰船典型装备（器件和连接点规模不小于10000个）的测试性建模与分析，实现测试性分析时间小于10秒。
     4. 支持舰船典型装备（器件和连接点规模不小于10000个）的交互式诊断方案生成，交互式引导测试单步推理时间小于1秒。任意单点故障条件下交互式引导测试可100%定位理论可达的最小模糊故障组。
     5. 构建舰船典型装备交互式故障诊断演示系统（某型船水声释放回收系统或某型船集中油源动力系统或相同复杂度的舰船典型装备）。
     二、国内外研究现状
     （一）舰船装备测试性与维修保障现状
     在舰船装备的测试性与维修保障领域，随着技术进步和装备升级，系统的组成、结构和工作机制变得越来越复杂。这种复杂性对于确保装备系统的可靠性、维护性和战术技术性能，以及其在关键时刻的功能发挥，提出了新的挑战。特别是在舰船装备使用现场，对于快速且准确地隔离故障并及时排除设备故障的需求日益增长。
     尽管国内外在装备故障诊断和分析方面进行了大量研究并研制了各种软硬件系统，但长期的装备保障经验表明，现有的故障诊断分析工具在实用性上存在限制。多数故障诊断方案应用范围狭窄，呈现“一机一方案”的现象，不同系统间难以通用。此外，不同装备型号和研制单位之间，缺乏有机集成和统一标准的维修辅助工具，形成了许多孤立的软件系统。因此，迫切需要发展统一标准的维修辅助系统，推动新的诊断测试技术在维修保障中的实际应用。现有的诊断测试辅助系统方案主要采用以下三种策略：
     一是不依赖于模型的方案，通常基于专家系统建立知识库，通过基于知识的推理辅助确定故障的类型和位置。这种方案要求每个系统都有其特殊的一系列诊断知识，难以在不同系统间共用，且由于复杂系统诊断知识庞大，建立完备的知识库既困难又耗时，因而这种方案仅适用于组成较为简单的系统。
     二是基于模型的方案，例如通过PETRI网、键合图、多信号流、概率网络图、逻辑物理综合建模等方式建立测试性模型或故障诊断分析模型。这些模型通过抽象系统的结构、组成、连接和信号传递等，提供故障诊断的推理决策支持。虽然这类方法简化了系统复杂的相互作用关系，但在实际应用中，多数故障是由系统内部连接故障导致，而非仅仅器件功能异常，这在现有的模型中往往被忽略。
     三是针对特定设备的诊断测试研究，如通过采集设备特征信号（振动、声音、电磁、温度等），并利用相关性分析、人工神经网络、支持向量机等方法进行故障分类和定位。这类方法虽然在特定故障类型的诊断中有效，但其针对性强，难以在不同种类的装备间通用。
     总的来看，现有的舰船装备测试性与维修保障技术在适应性、通用性和实用性方面仍有待提升。亟需创新和综合的解决方案，以适应复杂舰船系统的测试和保障需求，特别是在海上恶劣环境下确保装备的高效运作和可靠性能。
     （二）装备的可测试性与测试性建模技术研究现状
     可测试性又称为测试性或可测性。可测试性大纲将其定义为产品能及时准确地确定其状态（可工作、不可工作或性能下降），并对其内部故障进行有效地隔离的设计特性。可测试性设计指以提高可测试性为目的而进行的设计。基于测试性原理和开展测试的目标，可以根据一定的准则建立测试性模型，以测试性模型为基础又可以开发配套的诊断测试工具和辅助支撑软件，对实际使用过程中需要开展的测试行为进行必要指导。测试性设计、测试新建模和辅助测试推理决策有利于快速定位和排除装备故障，保证设备的可用性。
     自1975年F.Liour在《设备自动可测性设计》中首次提出可测试性概念以后。历经30年的发展，可测试性设计的研究发展经过了三个阶段：第一个阶段是基于经验的设计，第二个阶段是结构化分解方法的设计，第三个阶段是基于模型的设计。
     20世纪70年代到80年代是可测试性技术发展的初期，这个时期盛行的可测试性设计方法是基于经验的设计。该方法主要是通过记录工程实践中遇到的一些测试性问题，用以指导其他的测试性设计项目。1976年到1985年，美国陆续发布了《BIT设计指南》、《测试性指南报告》、《系统及设备维修性管理大纲》和《电子系统及设备测试性大纲》。1993年到1995年，美国国防部发布了《系统和设备测试性大纲》。这些标准的发布，标志着可测试性成为一门独立的学科，并使可测试性设计技术得到进一步的发展。同时，人们也认识到凭借经验的方法，缺乏可操作性。于是，逐渐形成了结构化的设计方法。结构化设计方法的核心是BIT体系结构设计和边界扫描技术。从1985年到21世纪初，这两种技术逐渐成熟与完善，在BIT结构化设计方面，国外学者提出了不少BIT体系结构，而目前主要采用的是层次BIT结构；在边界扫描技术方面，国外先后发布了《边界扫描标准》、《模块测试与维修总线标准》、《混合信号测试总线标准》、《先进数字网络的边界扫描标准》和《嵌入式芯核的可测性标准》。
     随着装备复杂程度越来越高，工作模式日趋多样化及，使得传统的结构化设计方法无法满足装备可测试性设计和装备及时保障支持要求，促使人们寻找一种新的、并行的设计方法。此时，基于模型的可测试性设计方法应运而生。在系统设计的早期阶段，系统仿真和实验的可用信息难以获取时，可以通过测试性建模，使用标准化的形式对系统中的模块、功能、故障、故障率、测试、测试位置以及它们之间的相互关系进行描述，用这种方法对系统的测试性设计进行描述和表达后，可以方便地使用计算机工具进行分析，并且根据分析结果改进设计。
     在测试性建模方面，目前，国外国内外都提出了一些相关性模型，例如逻辑模型（Logic Model）、信息流模型（Information Flow Model）、多信号模型（Multi-signal Model）和混合诊断模型（Hybrid Diagnostic Model，HDM）等，同时，还开发了许多基于模型的可测试性设计与分析软件与辅助工具，如LOGMOD、WSTA、START、TEAMS和eXpress等。国内的测试性建模技术起步的相对较晚，其研究主要是在相关性模型基础上做了一些改进，同时，也开发了一些基于模型的可测试性设计与分析软件与辅助工具，如广五所的CARMES、可维ATMS、TADES等；另外，国内对测试性建模方法也进行了研究，并取得了一些研究成果，包括利用EXPRESS-G、XML和本体等三种不同的方式和语言来描述设备的测试性。
     （三）基于测试模型的装备故障辅助诊断技术研究现状
     故障诊断和测试性是密切相关的两个问题，随着技术的快速发展，测试性设计、测试模型和故障诊断分析的耦合关系越来越密切，基于装备的测试性描述模型，通过交互性强的软件对诊断测试进行引导越来越重要，已经是现代高技术装备发展的一个重要方面。时至今日，故障诊断和测试性研究不仅需要系统建模、数理统计、图论、模式识别、信号处理、现代控制理论等传统方法，同时还引入了动态决策、人工智能、模糊理论、神经网络、群体智能等一系列现代科学。其中图论中的图模型、网络模型因其效率高、可定性、结果直观吸引了大量研究人员的关注，已经逐渐发展成为故障诊断的一个重要分支。从本质上讲前一阶段流行的多信号流模型、信息模型等都是图模型的一种表现形式。
     基于图模型的诊断方法主要可分为基于模型与基于过程历史两大类。基于图模型的故障诊断研究方法最早由Nakano等人于1974年提出，通过使用有向图对系统故障进行建模，为以后的研究打下了基础。随后Iri等人提出使用符号有向图（SDG, Signed Directed Graph）的概念，该模型在有向图的基础上利用图中边的正负来模拟故障节点之间的正负反馈作用，从而能够更好地对系统故障进行定性分析。Tsuge，Oyeleye等人在此基础上对算法进行了改进，并将其应用于实际系统的开发当中。美国德州大学的Wilcox则在SDG的基础上提出了可能因果图的概念（PCEG：Possible Causeand Effect Graph），进一步地扩展了SDG的相关概念。而Vedam于1997年提出将SDG与主元分析结合，使得SDG的研究不只限于图模型技术本身。近年来，基于图模型故障诊断方法研究也开始向实用性及大规模应用方向发展。如Sehgal等人提出基于有向图的分层理论，大大地提高了故障定位的效率。Yang等人在SDG基础上根据分层理论将故障传播分析成功应用于大规模控制系统。基于SDG的故障诊断方法是以定性的方式对故障进行处理，虽然有速度快易于实现等优点，但也存在着准确度不高的缺点。Kokawa等人在SDG基础上引入故障传播概率及传播时延等权重因子，同时并去除符号关系，从而提高了模型的准确性。随后Padalkar等人在此基础上对该方法进行了进一步的改进。
     除了对系统进行直接的图型化建模，基于图模型的搜索算法在故障测点选择方面也得到了大量的应用。Pattipati等人最早于1989 年提出以基于故障传播概率及测试代价矩阵的启发式搜索算法，同时结合信息论的相关概率对搜索的约束函数进行了定义。随后 Yang等人在故障字典的基础上，利用图形分层理论发展并改进了启发式搜索得到最优测点集，相对之前的测点选择算法在时间效率上得到了提高。由于测点选择问题已经被证明是多项式问题中的完全问题，因此近些年来更多的学者开始将神经网络、群体智能等高级启发式算法引入到测点选择算法中。当前基于图模型的故障诊断正逐步在向多学科整合的方向发展，通过对现有模型及算法的改进与优化，使其可以应用于大规模复杂系统中。
     （四）存在问题与发展方向
     在舰船装备的测试性和现场保障支持方面，国内外投入了大量资源并开展了一系列的研究工作，现有的基于各种网络、图、XML等描述方式的模型都是针对某些特殊装备的诊断测试问题提出的，所有建模方法都缺乏一套可以根据实际机电液系统建立诊断测试模型的明确的、无歧义的建模技术路线。这些已有方法的主要限制包括：
     信号耦合关系表达困难：在现有模型中，表达实际物理信号之间的耦合作用和关系极为复杂。且受限于模型处理能力，较难对系统中大量存在的线束等连接性器件进行与实际连接关系对应的建模。
     模型的非唯一性：由于基于不同的理解，即使是同一系统，所建立的诊断测试模型也存在显著差异，通过某些建模策略的调整和处理技巧，可以实现不同的测试性指标，限制了其实用性。
     交互式诊断支持有限：由于现有方案所生成的测试性模型主要关注于系统的功能和故障模式，而非物理层面的信号，因此在面对具体故障时，模型提供的交互式诊断指导信息有限。这种局限性在需要快速、准确地定位和解决现场故障的场景中尤为明显。
     鉴于现有方法的局限性，迫切需要开发一种通用性强、唯一、可靠、可校核的测试性建模方法。该方法应以原理图、接线图、传动图等为输入信息，支持装备测试性模型的自动化生成和即时评价。此外，基于新型测试模型和测试性分析评价理论，研究提出一种基于测试性复杂性、测试代价、测试次数等因素的交互式诊断方案通用生成方法。
     本项目的研究增量可总结如下：
     模型集成物理信号表达能力：所提出的模型将能够精准捕捉和反映系统中的物理信号及其相互作用，从而确保测试性分析能够更加准确地模拟实际设备的工作状态。这一能力对于理解和解决复杂系统中的测试性问题至关重要，为测试性指标的准确评估提供了坚实基础。
     基于物理信号的测试性模型生成方法：所提出的自动化生成测试性模型的方法，其核心在于利用原理图、接线图、传动图等输入信息，分析实际物理信号的传递和变换关系。这将确保生成的测试性模型不仅一致可校核，而且具有广泛的通用性。这样的方法将极大地缩短测试性模型的开发周期，同时保证其准确性和适用性。
     交互式诊断方案的智能生成与动态优化：考虑到舰船装备在海上恶劣环境中的特殊作业需求和有限的现场测试资源，交互式诊断是一种重要的测试、保障手段。研究交互式诊断方案通用生成方法，一方面需要优化增强模型对智能诊断的支持能力，在模型源头上就充分考虑诊断方案所需的信息要素，为交互式诊断提供基于实际物理信号的详实基础；另一方面则是考虑现场观测、测试资源与测试偏好的交互式诊断方案智能生成与动态优化技术，切实提高舰船装备的维护效率和任务可靠性。
     综上所述，本项目的研究重点在于通过创新测试性建模方法和诊断方案的开发，克服现有技术的局限，提高舰船装备的测试性和保障效率。

一、 概述
1.1研究背景
　　“舰船装备智能化测试性建模及诊断方案设计技术研究”项目针对舰船装备总体及复杂系统设备测试性指标及诊断方案论证、设计、试验、评估等需求，研究提出一种以原理图、接线图、传动图等为输入信息的智能化、可校核的测试性建模方法，支持装备测试性模型的自动化生成和即时评价。以新型测试模型和测试性分析评价理论为基础，研究提出基于测试性复杂性、测试代价、测试次数等因素的交互式诊断方案通用生成方法。研制测试性建模与交互式故障诊断一体化集成开发环境软件，构建舰船典型装备的交互式故障诊断演示系统，支持典型复杂机电液装备（器件和连接点规模不小于10000个）的测试性建模与分析、交互式诊断方案生成等核心功能，实现测试性分析时间小于10秒，交互式引导测试单步推理时间小于1秒，任意单点故障条件下交互式引导测试可100%定位理论可达的最小模糊故障组等技术指标。
　　本项目聚焦于舰船复杂机电液系统的自动化测试性建模、智能化故障诊断方案的生成以及交互式测试引导等关键技术领域的研究。其中，舰船装备集成设计和智能测试建模技术、舰船装备测试性模型自动分析和智能校核技术作为本项目的关键技术，是后续研究工作开展的基础，需要对其进行重点研究。
1.2国内外研究现状
　　可测试性又称为测试性或可测性。可测试性大纲将其定义为产品能及时准确地确定其状态（可工作、不可工作或性能下降），并对其内部故障进行有效地隔离的设计特性。可测试性设计指以提高可测试性为目的而进行的设计。基于测试性原理和开展测试的目标，可以根据一定的准则建立测试性模型，以测试性模型为基础又可以开发配套的诊断测试工具和辅助支撑软件，对实际使用过程中需要开展的测试行为进行必要指导。测试性设计、测试新建模和辅助测试推理决策有利于快速定位和排除装备故障，保证设备的可用性。
　　自1975年F.Liour在《设备自动可测性设计》中首次提出可测试性概念以后。历经30年的发展，可测试性设计的研究发展经过了三个阶段：第一个阶段是基于经验的设计，第二个阶段是结构化分解方法的设计，第三个阶段是基于模型的设计。
　　20世纪70年代到80年代是可测试性技术发展的初期，这个时期盛行的可测试性设计方法是基于经验的设计。该方法主要是通过记录工程实践中遇到的一些测试性问题，用以指导其他的测试性设计项目。1976年到1985年，美国陆续发布了《BIT设计指南》、《测试性指南报告》、《系统及设备维修性管理大纲》和《电子系统及设备测试性大纲》。1993年到1995年，美国国防部发布了《系统和设备测试性大纲》。这些标准的发布，标志着可测试性成为一门独立的学科，并使可测试性设计技术得到进一步的发展。同时，人们也认识到凭借经验的方法，缺乏可操作性。于是，逐渐形成了结构化的设计方法。结构化设计方法的核心是BIT体系结构设计和边界扫描技术。从1985年到21世纪初，这两种技术逐渐成熟与完善，在BIT结构化设计方面，国外学者提出了不少BIT体系结构，而目前主要采用的是层次BIT结构；在边界扫描技术方面，国外先后发布了《边界扫描标准》、《模块测试与维修总线标准》、《混合信号测试总线标准》、《先进数字网络的边界扫描标准》和《嵌入式芯核的可测性标准》。
　　随着装备复杂程度越来越高，工作模式日趋多样化及，使得传统的结构化设计方法无法满足装备可测试性设计和装备及时保障支持要求，促使人们寻找一种新的、并行的设计方法。此时，基于模型的可测试性设计方法应运而生。在系统设计的早期阶段，系统仿真和实验的可用信息难以获取时，可以通过测试性建模，使用标准化的形式对系统中的模块、功能、故障、故障率、测试、测试位置以及它们之间的相互关系进行描述，用这种方法对系统的测试性设计进行描述和表达后，可以方便地使用计算机工具进行分析，并且根据分析结果改进设计。
　　主要的系统测试性建模方法如图 1所示，可大致分为基于数值仿真的建模方法、图论模型、基于系统故障树的建模方法、逻辑模型等。

图 1 主要的测试性建模方法分类
　　在装备设计时，为了分析装备性能通常会建立其数值仿真模型，此时在定量模型中增加对故障状态的模拟，则可基于数值仿真模型进行故障与测试的仿真，从而获得系统中测试与故障的关系，并可得到基本的故障与测试间的相关性矩阵。
　　国外专家首先提出将模拟仿真与测试性验证紧密结合起来。Sujoy Sen等人通过仿真的方式以及将测试性分析方式与故障诊断结合得到系统依赖模型，在通过依赖模型得出测试性指标。Major Donald Paul Waters等人首先提出了M&S in T&E的工作流程概念，并提出建模仿真技术和测试性验证技术可以交互使用。美国国防军需大学提出提高验证结果的准确性和置信度可以通过仿真技术与测试性验证相结合的方式，降低测试成本，研制阶段时期即可以提供充足的数据。由于M&S in T&E标准在系统装备的研发过程中产生了良好效应，美国国防部科技采办办公室对M&S in T&E规范标准进行了重点研究并在1997年提出了仿真、测试与评估过程指导手册，在手册中规定了计算机仿真技术在测试性验证过程中的相关流程，也是测试性验证中仿真技术的使用标准。
　　国内研发人员在近年来意识到M&S in T&E的重要意义后，也开始把建模与仿真技术运用于测试性验证之中。邱静和连光耀于2007年创立了基于虚拟样机的虚拟验证技术的理论框架，表明测试性虚拟验证的方法是未来测试性验证技术的一个发展方向。2009年高鑫宇首先提出了测试性虚拟验证的概念，并着重研发了故障建模技术。不足之处是在虚拟验证过程中将被测对象、故障与环境之间相互联系割裂开，所采用的基于模糊概率的多信号图模型往往局限于测试性预计的思路。王青麾和王立兵等将PSPICE仿真运用于电路中并论证了有效性。但实际上PSPICE是电路方面的专用软件，对其他领域具有局限性。张勇等提出的FFBTEM建模技术，其所建模型为半实体模拟系统，而不是真正意义上的测试性虚拟验证模型。2011年赵晨旭重新设计了测试性虚拟验证体系的技术流程，并搭建了面向直升机航向姿态控制技术的测试性虚拟验证体系。而其所用的软件Multisim10属于电路仿真领域专用软件，无法做到多学科领域的集成。且采用基于概率统计学方法的采样技术所得到的故障样本集不能分析故障发生机制，置信度较低。尽管许多的专家对测试性虚拟验证领域的各方面不停探讨，但目前还面临着理论基础不清晰，没有规范的方法和技术过程等困难，但对测试性虚拟验证领域的探讨仍然具有重大意义。
　　故障树模型是一种描述系统测试与系统故障之间因果关系的定性模型，它以系统故障为顶事件，并且以图的形式描述了与顶事件相关的中间事件和底事件。使用该模型时可以将系统故障原因按照树状进行逐级细化，最终形成故障树模型，按照该模型进行测试即可定位故障。该方法由于建立和使用都简单方便，并且符合人类思考方式，在实际工程项目中经常与其他方法搭配使用。但是该方法的实际应用效果非常不稳定，想要获得高效稳定的故障树模型依赖于丰富的专家经验以及日常维护记录，并且故障树模型没有规范化的统一描述，建模时错误以及疏漏难以发现。
　　基于图论模型的测试性建模方法首先建立一种通用的建模规则，在分析系统的结构、功能或行为等信息的基础上，基于通用规则建立系统的功能描述图模型。图论模型方法采用离散的值空间对系统物理量或系统功能进行描述，并基于系统器件的物理结构信息或系统功能抽象，采用定性约束的方式建立物理量或系统功能的因果逻辑关系。由于图论模型基于统一的建模规则描述了系统的结构特性，且模型具有因果逻辑关系，所以图模型可以基于当前观测信息，采用统一的故障传播推理算法对不同系统进行故障推理并分析测试与故障与测试之间的关系，并对推理过程和分析结果做出解释。依据系统模型提供的信号因果传播关系，图模型诊断方法还可以通过测点推荐算法开展交互式诊断。典型的图论模型有Petri网、键合图模型、多信号流图模型等。
　　国外的研究人员最先开始针对故障树模型的研究，如20世纪60年代Watson等人在洲际导弹设计和研发过程中提出的故障树分析法[i,ii]。Tanaka等人针对故障树模型的缺点，将其与模糊集理论融合，提出了模糊故障树[iii]。文献[iv]结合模糊集理论和专家经验，实现了对具有不确定数据的动态系统的时间故障树模型的定量分析。文献[v]采用故障树分析方法解决了油气管道的故障诊断和风险决策问题，面对缺乏历史数据的情况采用了专家启发的模糊故障树分析法，提高了油气管道运行的安全性。国内研究人员如文献[vi]将动态故障树应用于航空装备故障诊断，采用马尔科夫模型进行求解，验证了该方法在航空装备可靠性评估领域的有效性。刘若君团队针对煤矿坑道钻机液压动力系统中存在的逻辑关系复杂、故障形式多样、历史数据难以获取等问题，提出了基于T-S模糊故障树的故障诊断方法，并通过实验验证了该方法可以有效提高煤矿坑道钻机的可靠性[vii]。故障树模型本质上是一种诊断模型，由于测试性分析与设计的目的是为了进行故障诊断与故障隔离，所以可以从诊断模型来计算得到故障与测试间的相关性矩阵，即测试性分析与优化所使用的基础模型。
　　针对系统的测试性模型的研究成果中，最经典的是逻辑模型，最早可追溯到20世纪60年代，由DSI公司的De Paul 所提出。逻辑模型直接建立系统的模块与测试之间的逻辑关系。逻辑模型通过功能流框图和相关性图表，来表示被测单元中功能模块和测试之间的关系。美国 DSI 公司研发了一款软件 LOGMOD 用来建立逻辑模型，进行装备的测试性分析，可以对产品的测试性水平进行分析，寻找设计中存在的不足，实现测试性水平的提高，主要测试目标为小规模电子系统；不能反映测试与具体故障模式的相关性。只适用于产品设计阶段，  应用范围小。基于逻辑模型，后续又发展出相关性模型、因果模型与信息流模型。
　　在这些诊断测试模型的基础上诞生了许多基于诊断测试模型的可测试性辅助设计工具，例如TEAMS、eXpress、WSTA等。相关性模型主要利用抽象出系统故障与测试信号之间的对应关系建模，通过生成测试与故障之间的有向图来生成模型，因此可以明确的表示系统故障与测试的关系，并以其中的因果关系作为推理诊断的依据。多信号流模型是相关性模型发展的应用最广泛的成果，其特点是不同于相关性模型只描述故障与测试的相关性，多信号流模型更进一步从信号的多维属性入手，在功能信号和故障测试之间建立因果关系，相比信号流模型更接近实际系统，在美国航空航天领域被广泛使用。
　　国外研究人员针对多信号流模型有了很多研究，美国QSI公司的TEAMS软件是以多信号流模型进行故障诊断的代表，其基本操作是：首先，将系统的多功能信号以及系统故障模式，按照分层有向图的形式进行建模；随后，根据诊断测试模型生成D矩阵，通过对D矩阵进行分类、变换、化简等操作形成故障诊断树，从而进行故障诊断推理。其软件建模界面如图 2示。国内虽然已经开始了该方向的研究，如韩露团队将多信号流模型应用到了某导弹的系统级测试当中[viii]，但是国内目前并没有诞生出功能完整，且经过实际工程项目检验的诊断测试辅助软件。
　　虽然多信号流模型在学术界和工业界有着较多的研究和应用，但是其仍然有较大的局限性。目前以多信号流模型为基础的故障诊断理论，其建模理论基本上都是基于系统故障与系统测试之间的抽象逻辑关系，与实际系统的结构、连接情况无关。因此这些方法大都建模困难，并且存在建模结果和测试结果不唯一的缺点。不同知识背景的建模人员可能会对系统有不同的理解，从而产生不同的诊断测试模型，最终导向不同的测试结果。

图 2 TEAMS建模软件界面
　　国内的基于多信号流图的测试性建模技术起步相对较晚，其研究主要是在相关性模型基础上做了一些改进，同时，也开发了一些基于模型的可测试性设计与分析软件与辅助工具，如广五所的CARMES、可维ATMS、TADES等；另外，国内对测试性建模方法也进行了研究，并取得了一些研究成果，包括利用EXPRESS-G、XML和本体等三种不同的方式和语言来描述设备的测试性。
　　基于图论模型的测试性建模方法为构建全面精确的系统模型提供了完整的技术手段，可构建通用的建模准则，使建立的模型与实际系统的物理结构与功能保持一致，确保无论系统结构、功能还是行为如何复杂，均能通过这套准则构建起系统功能描述的图模型。此建模方法的核心在于运用离散值空间对系统内的物理量或功能进行表述，同时借助系统组件的物理构造信息或功能抽象，采取定性的约束手段来构建物理量或系统功能间的因果逻辑关联。这一过程不仅确保了模型能够准确反映系统的内在结构特征，而且赋予了模型强大的因果逻辑推理能力。
　　图论模型的上述特点使得其在故障诊断领域展现出显著的优势。首先，基于统一建模规则建立的图模型能够兼容不同类型系统的结构特性，这意味着即便是在处理高度复杂的舰船装备及其子系统时，也能通过同一套故障诊断推理算法实现故障的精准定位。图模型内部嵌入的因果逻辑关系，允许系统基于实时观测数据进行动态更新，从而确保诊断推理过程的灵活性与准确性。图模型所提供的信号因果传播路径，通过测点推荐算法的应用，不仅可以优化测试点的选择，提高诊断方案的效率。依据系统模型提供的信号因果传播关系，图模型诊断方法还可以通过测点推荐算法开展交互式诊断。在本项研究中具有明显优势，可进行重点分析研究。
　　下面对基于图论模型故障诊断的国内外研究现状进行阐述。
　　目前常见的图论模型建模方法如图 3所示。

图 3 图论模型建模方法
　　键合图模型是麻省理工学院Paynter教授针对系统动态仿真提出的定性图模型建模方法[ix]。键合图模型以能量守恒定律为基础，通过特定的元素来描述系统功率流的构成、转换、逻辑关系和物理特征。经过不断发展，键合图模型已经成为电液仿真领域广泛应用的建模方法，也有不少学者将其用于系统故障诊断。Low 等人研究了基于有限状态自动机理论，建立了可以描述系统故障行为与正常行为间转换关系的混杂键合图模型，通过故障行为匹配实现故障定位[x]。胡均平等 [xi]对故障诊断键合图中开关类元件的描述进行了研究。勇佳棋[xii]将键合图用于高铁牵引系统的故障诊断，取得了不错的实用效果。
　　Petri网模型是一种网状信息流模型，模型通过弧、库所和变迁来描述系统中某些事件发生后对系统状态改变的因果关系。在系统故障诊断中，Petri网模型通过将系统故障作为顶库所，器件故障定义为中间库所或底层库所，从而形成故障传播因果关系。针对复杂系统故障诊断问题，不少专家学者对Petri网模型进行了优化，如Xu等[xiii]提出模糊Petri网理论，以应对非精确或非完全信息下的故障诊断。Dimitri Lefebvre等[xiv]针对系统的结构性故障和缓变故障，提出了一种基于非马尔可夫随机Petri网模型，并建立了相应的故障诊断系统。
　　功能模型是Keuneke于20世纪90年代初提出的基于系统功能抽象的建模方法，功能模型将系统功能抽象为四种特定类型，通过对特定类型功能的关联，实现对系统整体功能的描述[xv]。基于功能模型的建模方法包括MFM模型和GTST模型等[xvi,xvii]。功能模型需要对系统功能进行抽象描述，建模过程较为复杂。
　　有向图模型通过节点和有向边对系统故障或者功能之间的定性因果关系进行描述。主要包括PCEG模型[xviii]、故障传播有向图模型[xix]、SDG模型[xx][xxi]、因果图模型[xxii]等。有向图模型对系统器件行为或故障的因果关系描述较为充分，建模也相对简单，是目前应用较多的故障诊断建模方法。
　　多信号流图模型是一种基于系统故障信号传播特性的测试性分析模型[xxiii]。多信号流模型描述了测试和故障信号间的检测关系以及不同器件间故障信号的传播关系，是目前电液系统故障诊断和测试性分析的常用方法[xxiv]。国外对多信号流图模型的研究及应用以TEAMS软件为代表。国内也有较多基于多信号流图的故障诊断和测点优化推荐算法研究成果。如匡翠婷[xxv]采用AO*算法对多信号流图的故障诊断策略进行了优化研究,刘允昊[xxvi]通过算法优化建立了多信号流模型故障诊断系统并开展了实际应用。
　　结构行为模型是基于器件行为及系统结构的一种诊断描述模型。结构行为模型将系统器件统一抽象为多端口器件，通过逻辑代数式或一阶逻辑谓词描述器件不同行为模式（包括故障行为模式）下端口信号转换逻辑的约束关系，随后通过对系统实际物理拓扑连接的建模对器件端口间的信号传播关系进行描述，可以形成与系统实际物理关系严格一致的测试性诊断模型。结构行为模型可以根据实际观测信息和系统模型进行信号传播并发现传播过程中的冲突，从而进行故障器件的推理定位。上世纪末，Randall Davis提出的基于结构与行为的诊断推理方法[xxvii]和Reiter提出的基于第一定律的诊断理论[xxviii]奠定了结构行为模型诊断的理论基础。随后，Johan de Kleer等在第一定律的基础上，对基于结构行为模型的数字电路多器件并发故障诊断进行了深入研究，并建立了ATMS故障诊断系统[xxix-xxx][xxxi]。Pulido 等对基于结构行为模型的动态系统故障诊断方法进行研究,研发了DXPCS系统。
1.3发展趋势
     在舰船装备测试性及现场保障支持领域，国内外研究工作虽已积累一定成果，但仍存在诸多局限性。现有的基于网络、图论、XML等描述方式的测试性建模方法大多针对特定装备或应用场景，尚未形成适用于复杂机电液系统的通用建模技术路线。这种局限性阻碍了舰船装备测试性建模技术的全面推广和应用，而如何克服当前测试性建模技术的瓶颈，已成为亟待解决的关键问题。
     当前技术局限性主要表现在模型的通用性、唯一性、物理信号表达能力以及交互式诊断支持等方面。
     信号耦合关系表达困难：在现有模型中，表达实际物理信号之间的耦合作用和关系极为复杂。且受限于模型处理能力，较难对系统中大量存在的线束等连接性器件进行与实际连接关系对应的建模。
     模型的非唯一性：由于基于不同的理解，即使是同一系统，所建立的诊断测试模型也存在显著差异，通过某些建模策略的调整和处理技巧，可以实现不同的测试性指标，限制了其实用性。
     交互式诊断支持有限：由于现有方案所生成的测试性模型主要关注于系统的功能和故障模式，而非物理层面的信号，因此在面对具体故障时，模型提供的交互式诊断指导信息有限。这种局限性在需要快速、准确地定位和解决现场故障的场景中尤为明显。
     为应对上述挑战，未来测试性建模技术的发展将重点围绕通用性、唯一性、可校核性及自动化展开，具体趋势可归纳如下：
     模型集成物理信号表达能力：测试性模型需要能够精准捕获系统中物理信号的传递及其交互作用。这不仅有助于真实模拟复杂系统的运行状态，还为测试性指标的准确评估奠定基础。此外，通过对信号耦合关系的精确建模，可进一步提高测试性分析结果的可信度，为诊断方案的优化与交互式诊断提供有力支持。
     基于物理信号的测试性模型生成方法：自动化模型生成技术的发展将依托于原理图、接线图、传动图等输入信息，重点分析系统中物理信号的传递路径和变换关系。这一技术路径旨在确保生成的测试性模型具备一致性、可校核性和广泛的通用性，从而显著降低模型开发成本，缩短开发周期。
     交互式诊断方案的智能生成与动态优化：面向舰船装备的特殊使用环境，交互式诊断技术是舰船装备现场维护保障工作中的重要技术手段。通过将测试性模型与智能诊断技术深度融合，研究基于测试复杂性、测试成本、测试次数等因素的交互式诊断方案通用生成方法。在实现诊断方案智能优化的同时，注重动态调整诊断过程以适应现场测试资源和操作偏好的需求，从而提高装备维护效率和任务可靠性。
     鉴于现有方法的局限性与测试性领域技术发展趋势，迫切需要开发一种通用性强、唯一、可靠、可校核的测试性建模方法。该方法应以原理图、接线图、传动图等为输入信息，支持装备测试性模型的自动化生成、自动分析、和智能校核技术。
     本关键技术研究报告重点阐述舰船装备的测试性建模技术与模型自动分析和智能校核技术的研究工作。
     


二、舰船装备集成设计和智能测试建模技术
     舰船装备集成设计和智能测试建模技术的基本原理如图 4所示。首先通过T语言（Test modeling Language，自主研发的一种专用于测试性分析的底层器件功能模型描述语言）定义机电液复杂系统底层器件的功能和器件引脚信号之间的相互作用（信号传递、变换、控制）关系，建立底层器件的功能模型库（FM-LIB Function Model Library）。然后，基于电气、机械和液压系统的实际组成和连接关系，以电气系统接线图、液压原理图和机械传动图为信息输入，逐层建立机电液耦合的系统级测试模型。由于系统测试性建模所用器件在功能和接口关系上与实际机电液设计图中所用元件严格对应，所以建立的诊断测试系统模型也和实际系统之间存在严格的对应关系，可以保障最终的建模结果唯一、建模过程高效且无歧义，通过设计图和测试性模型之间器件和拓扑关系的交叉匹配，校核测试性模型的正确性。

　　图 4 舰船装备集成设计和智能测试建模环境基本原理示意图
     随后，针对机电液系统定义信号-功能组（FSB Function-Signals Block），将所有可观测的故障现象与特定的传感器、执行器和驱动器动作异常相关联。信号-功能组表示了导致特定故障现象和功能异常的一种传感器和执行器控制信号组合，每个信号-功能组包括了功能描述、传感器和执行器信号、异常现象描述等基本信息。在实际装备使用阶段，基于所定义的信号-功能组和实际观测到的故障现象，系统自动采用优化推理策略对所涉及的信号回路及其关联回路进行回溯，根据设定的测试偏好和测试约束（测试时间、测试代价、测试步数、测试可用工具等）自动优选最优测试点，并通过图文等可视化手段引导测试人员进行测试，然后根据测试反馈信息自动判断系统状态，优选下一步的测试内容和测试位置。当与在线状态采集单元连接时，诊断测试推理程序自动获取在线测点数据，并对故障进行实时在线的综合推理和定位，可以显著提升故障隔离定位的效率。
集成设计与建模技术的总体路线如图 5所示，简述如下：
     首先针对复杂机电液系统中基础器件建立功能描述模型，表达功能单元各端口之间输入和输出信号的复杂耦合作用关系；针对实际设备中信号传递关系，建立以器件为基础的测试性模型，对系统故障、测试和行为等进行全面建模，即建立完整的信号-功能关联描述测试性模型，支持测试性评价和诊断策略推理。
　　在上述系统功能结构模型的基础上通过智能校核技术，解决传统方法在处理复杂机电液设备测试性建模时准确度不足和效率低的问题，确保测试性模型准确反映设备的物理结构和工作原理。其次，利用图网络分割技术，有效地区分故障区域和非故障区域，提升测试性分析的精确度，利用图网络模型来更精确地开展测试性预计。同时通模型自动分析技术，帮助设计人员理解船舱装备的测试性影响因素，指导系统设计的优化，从而提升装备的测试性。

　　图 5 总体技术路线
　　机电液系统的基本功能是通过系统组成器件的物理拓扑连接和器件的外部功能对控制信号的传递和变换作用实现的。在机电液系统故障诊断建模过程中，可以将系统器件统一抽象为对系统信号处理的多端口器件，然后通过一定的约束语法规则来简化描述器件对端口信号的传递和相互作用关系，最后通过图模型建立器件端口间的拓扑连接关系，就可以形成一种与实际物理系统严格对应的系统模型。
　　对于机电液系统模型来说，只要明确了系统在各种不同功能下的外部输入信号集的状态，通过模型的模拟即可确定整个系统的内部信号及输出信号状态。系统的功能性故障征兆即体现为系统在某组确定输入下系统输出信号的异常。此时基于模型的推理和实际系统观测信号的对比即可得出系统在不同功能下的信号冲突集合，从而开展基于模型的故障诊断。基于该建模思想，利用电气系统的接线图、液压系统原理图和机械传动图表示的机电液系统中信号、介质、运动的传递关系，提出一种新的测试性建模语言―T语言（Test Modeling Language），并基于此提出适用于舰船机电液系统的信号-功能拓扑结构图模型建模方法，即基于电气和液压物理拓扑结构和机械传动关系的机电液系统联合层次化建模方法。
　　
　　图 6 层次化建模流程
　　从简化建模过程和降低建模难度这一层面出发，在本研究的智能化建模方法中，首先建立一个涵盖舰船上常见系统、设备、单元、模块的综合测试性模型模板库。这一模板库不仅包括了各类机电液系统的标准化模型，而且每个模型都详细描述了不同的失效模式和行为特征。这种标准化方法极大简化了从零开始创建每个新系统模型的过程，而且也适用于那些只有部分设计细节的系统。例如，对于一个仅有基本功能描述的接线箱，我们的方法能够自动引用与之相关的标准化模型，并根据系统的特定需求对模型进行调整和优化。接下来，应用机器学习和模式识别技术来处理输入数据，如电路图、液压原理图等，自动识别模型中的缺失信息。通过这种智能化手段，即使在缺乏详尽的底层设计细节的情况下，也可构建出与实际物理系统对应的测试性模型。此外，我们的智能化建模方法能够识别系统或模块中可能缺失的关键特性，如特定的失效模式或行为特征，并自动将这些信息融入到现有模型中。这不仅提高了模型的完整性和准确性，也大大减少了手动建模的时间和资源消耗。例如，对于电源系统，该方法能够根据电源系统的一般设计自动识别其工作特性和可能的故障模式，如恒压功率区间、过流保护等，从而确保模型能够准确反映实际工作环境中的系统表现。此外，该方法还包含一个自适应学习机制，根据最新的系统数据和故障案例进行优化和更新。这意味着模型不是静态的，而是能够根据新信息的出现而不断进化，确保始终与实际系统的运行状态保持一致。通过不断分析系统数据和故障案例，能够优化并更新测试性模型，从而更加精确地反映实际系统的特性。通过综合这些技术，我们的方法不仅简化了复杂系统的测试性建模过程，还提高了模型的适应性、准确性和实用性，特别是在处理大型舰船系统时。在这些系统中，多个子系统可能相互依赖，功能交叠，因此需要一种能够准确反映这种复杂性的建模方法。我们的智能化建模方法通过提供精确、详细且易于校核的模型，为现代舰船装备的测试性设计和维护提供了强大的技术支持。
2.1 信号-功能拓扑结构图模型形式化定义
　　信号-功能拓扑结构图模型是在分析电液系统的物理拓扑连接、器件功能和系统控制模式信号集的基础上，基于器件功能抽象得出的系统结构行为描述。模型基于改进的T语言来定义器件（LRU）对系统信号的约束和控制功能，以分层拓扑模型描述器件的从属关系和物理连接关系，从而完成对电液系统的模型化描述。最后通过系统功能约束集来表征不同系统功能和控制模式下的必要信号组合及各信号的约束状态，对系统不同功能模式下的故障诊断提供支持。基于信号-功能拓扑结构图的电液系统建模结构如图 7所示。
　　
　　图 7 基于信号-功能拓扑结构图的电液系统故障诊断模型
　　对信号-功能拓扑结构图模型从数学形式上进行如下定义：
　　信号-功能拓扑结构图模型：基于信号-功能拓扑结构图的故障诊断模型由系统模型和系统功能约束集组成，即：
　　
　　系统分层模型：为描述系统器件的物理位置从属关系和功能聚合关系，从而引导系统测试和降低系统诊断推理复杂度，系统模型采用分层建模的方式。在模型中将系统分为系统、子系统和器件三个层次，系统部分器件的组合及其拓扑连接构成子系统，子系统间的拓扑连接构成完整的系统模型。
　　系统模型：系统模型是由器件集合和无向边拓扑结构组成的无向图表示，即：
　　
　　
　　
　　其中，为系统器件功能模型，为器件物理端口间的拓扑连接。的数学描述如下： 
　　		
　　其中，和为系统器件模型的物理端口，表示和两端口间存在物理连接关系。
　　系统功能约束集：系统功能约束集由若干信号功能组定义组成，集合中的每个信号功能组定义了与实际物理系统某种特定功能（或控制模式）对应的一组关键信号（包括控制信号、动作信号等）及其取值状态。以系统功能约束集为基础一方面可以识别系统当前所处的运行模式或工况，另一方面也为系统异常状态的判定和初步诊断推理提供依据。功能约束集包括了系统功能定义和与功能相关的信号集合描述，其数学定义如下：
　　①系统功能集合
　　
　　其中表示电液控制系统的一种控制功能或控制模式。
　　②系统功能和系统控制信号、动作信号的关系集合
　　
　　其中，当为系统控制信号端口时，表示功能模式实现的必要条件是端口的控制信号在区间内，即是系统功能实现的支撑环境。当为功能输出执行端口时,表示功能模式实现的结果是端口的信号状态在区间内，即是系统功能实现的最终表现，其中可在系统功能定义时直接由区间或数值的形式给出。
　　为了能对系统的测试性进行分析、预计与优化，还需要对系统中的测试进行定义。
　　测试的有限集合T：
　　T={t_1,t_2,t_3,?,t_m}
　　其中测试与测试之间彼此独立，测试分为实测试（有明确描述与判断准则的测试）与虚测试（未具体实现的测试，例如对模块全局状态的测试，或对某个具体功能的是否正常的测试）。
　　实测试具体又包含运行测试、初始化测试、探针测试、信号测试、检查测试。
　　1）运行测试：运行测试是通过对系统的实际运行状态进行检测，来评估系统在正常操作条件下的性能和故障诊断能力。这些测试通常是在系统或设备处于正常运行时进行的，重点是验证系统功能是否按预期执行。
　　2）用户触发测试：用户触发测试是由系统用户主动发起的测试。这类测试通常是为了解决某个特定问题或验证系统某部分功能的正确性，用户可以根据需要选择具体测试点进行测试。例如可供用户运行的特定诊断程序。
　　3）探针测试：探针测试指的是通过在系统中安装特定的探针或传感器，实时监测系统的运行状态和信号。这类测试有助于实时获取系统内部的运行数据，从而进行诊断分析。例如对特定位置的电压、电流、压力、流量、应力安设传感器进行测试。
　　4）特征测试：特征测试通过对系统的某些特定行为或输出信号进行分析，识别出特定的故障模式或功能异常。签名测试通常涉及到对系统输出的信号进行模式识别，以便确认系统是否存在故障。例如对数字系统在给定输入序列下进行输出测试。
　　5）检查测试：检查测试是指对系统进行的视觉检查或物理检查，以确保设备或系统各部件符合设计和规范要求。这类测试通常不涉及动态操作，而是基于静态的物理检查。例如检查金属件表面有无裂纹，检查导线端子是否松动或脱出。
　　虚测试是指那些尚未具体实现的测试，但已经在模型中定义并计划在未来实现的测试。虚测试通常用于描述系统中的一些全局状态或特定功能的测试需求，这些测试在当前阶段可能不具备具体的实施条件或技术手段。当虚测试的具体实现条件成熟后，可以转化为实测试。
2.2 机电液系统器件功能模型的描述方法
　　（1）机电液系统器件功能建模的基本理论研究
　　机电液系统器件以端口作为信号的输入输出载体，通过器件的特有结构特性完成对信号的转换和逻辑控制。在器件功能的建模过程中，器件模型的建模精度和模型建立方法（如键合图采用功率信号守恒关系建模、因果图采用故障影响逻辑建模、Petri网采用定性信号传递建模）的不同，会直接影响到建模复杂度、故障诊断复杂度和诊断精度。所以，对器件功能逻辑描述方式的研究极为重要。
　　机电液系统器件本质上是由各类机、电、液基础元件组成的，如电阻、电感、液阻或机械、电磁结构等。信号在各类基础元件中都是能量守恒的，利用能量守恒的方式来建立系统器件的功能模型不失为一种可靠的方法。以能量守恒为基础可以建立非常精确的数学模型，在仿真领域有着较大优势，在系统仿真中应用广泛的键合图理论就是以信号能量守恒为基础的。
　　但是随着系统集成度的不断提高，电气和液压系统的器件集成度越来越高。这些器件由大规模集成的机电液基础元件或复杂架构构成，以完成一定的控制逻辑或信号转换逻辑功能为外部表现。对于这种高集成度器件,无法精确建模来描述其功率流的守恒特性，或对守恒关系的描述非常复杂。并且功率守恒建模方式对于器件内部的控制作用（如继电器线圈对触点的控制、开关器件状态对通断的控制、器件使能端口对器件逻辑的控制等）难以描述。在实际系统故障诊断中，往往只关注器件是否完成其特定的外部功能以及信号值是否在特定范围。所以，可以基于器件对信号处理的外部功能特性和故障诊断需求，使用简单的逻辑语句对器件不同功能逻辑支路的信号变换约束进行简化建模。
　　以调距桨电气系统中的直流继电器为例。直流继电器的线圈输入是控制信号逻辑支路，触点回路作为被控逻辑支路。它相当于“自动开关”，在电路中起着自动调节、安全保护、转换电路等作用。其工作原理是通过外部对线圈回路的电压控制产生电磁力，电磁力与被控触点的机械力相互作用从而控制触点回路的拓扑通断。直流继电器功能示意图如图 8所示。
　　
　　图 8 继电器功能及端口示意图
　　若对继电器严格按照功率守恒关系进行建模，其功率流的转换关系包含了电气-机械转换、电-磁转换等，建模十分复杂。并且由于环境因素影响，其功率流的转换关系也会随之波动。而在系统故障诊断时，我们往往只关心信号的变动范围和器件的功能状态是否正常。所以，可以将线圈输入端口A1和A2的连接关系简化为带有精度范围的阻性连接，建立线圈支路电压与电流信号的约束逻辑。对于触点之间的连接，由于在电路中触点电阻可以忽略，所以可以等效为阻值为0的连接。而对于A1与A2端口的电压差信号对于触点间拓扑连接关系的控制作用，可以采用简单的条件逻辑语句进行表达。这样的建模方式不仅可以满足故障诊断需求，提高诊断求解效率，更可以降低模型的建立难度。
　　（2）机电液系统器件功能建模实现方法
　　本项目提出基于T语言描述的器件信号-功能建模方法，相关定义如下：
　　物理端口：物理端口是指系统器件物理上存在的对外连接端口，如电气器件的接线端口或液压器件的管道接口。电气系统和液压系统的物理端口所能接收处理的信号类型有所不同，系统通过器件物理端口间的拓扑连接实现信号传递。
　　虚拟端口：虚拟端口是指某些器件特有的、对外无连接的输入或输出特定信号或指示状态的端口。如手动开关的手动状态控制端口、触摸屏的虚拟按钮、器件的状态指示灯输出等。虚拟端口会映射到器件的功能描述中参与信号约束。不同于物理端口中信号的相互影响关系，虚拟端口的信号具有确定的输入或输出定义。
　　系统器件描述：系统器件由器件端口集合和器件功能逻辑约束的二元组表示，即
　　
　　① 器件端口集合定义
　　
　　
　　
　　其中，为器件物理端口集合，为器件虚拟端口集合。
　　② 器件功能逻辑约束是指系统器件端口间信号的内部逻辑变换关系。器件功能逻辑的定义基于逻辑约束T语言实现。
　　器件功能逻辑约束T语言
　　项目团队提出了一种测试性描述语言――T语言（Test modeling language），其主要语法规则如图 9所示，该语言能够便于描述输入和输出端口之间的耦合、传递、变换和控制关系。T语言的设计初衷是解决现有建模方法中信号关系表达困难的问题，使得模型能够更好地反映实际系统的信号传递和耦合情况。T语言在设计过程中，特别注重其简洁性和表达能力，确保能够准确描述复杂机电液系统的信号传递路径和耦合关系。通过T语言，可在建模过程中清晰地定义各个部件的功能及其信号接口，为后续的系统测试性预计和诊断方案设计与优化奠定基础。

图 9 T语言主要语法规则
　　T语言是本项目基于舰船装备机电液系统的器件功能和系统结构提出的可以实现系统信号描述、器件外部功能描述和系统功能约束集定义的代码语法规范，由语法关键字、逻辑运算符、逻辑谓词和语法结构组成。采用T语言对舰船装备机电液系统进行建模，可以大幅简化系统的建模难度，对不同控制模式下的系统故障诊断提供支持。
　　T语言本质上是一类伪代码，在系统故障诊断时由T语言编译器进行语法解析，并根据解析结果和模型拓扑连接进行故障诊断推理。T语言的开发是为了克服现有建模语言在故障诊断方面的固有局限性。现有的语言如Modelica、SysML和X语言等，最初用于数值仿真，在测试性和诊断建模方面存在局限性。这些语言在诊断应用中的适配需要较大工作量，且受限于现有语言的基础框架，难以有效地加入某些测试性和诊断特征。因此，为优化诊断建模过程，本文引入了T语言（Test modeling Language，测试性建模语言）。T语言是我们研究团队自行设计和开发的一种专门用于电液系统故障诊断的测试性建模语言，具备良好的适用性与灵活性。信号-功能拓扑结构图模型器件T语言描述规则如下。
　　① 器件端口定义
　　器件端口的T语言定义描述了器件端口的不同类型，且对端口名称进行重命名，方便对器件功能的统一描述。器件端口定义的部分T语言语法关键字如表 1所示。
　　表 1 器件端口定义T语言语法关键字
T语言关键字含义T语言关键字含义PORT_DEF_BEGIN端口定义开始PORT_DEF_END端口定义结束ELECTRIC _ORAGIN_PORT电气源端口ELECTRIC_PORT电气端口MACHINE_ PORT机械端口HYDROLIC_PORT液压端口MACHINE_ORAGIN _PORT机械源端口HYDROLIC_ORAGIN_PORT液压源端口VIRTUAL_INPUT_PORT虚拟信号输入端口VIRTUAL_OUTPUT_PORT虚拟信号输出端口　　AS端口名称重定义　　DEF定义起始关键字　　器件端口定义的T语言语法结构如下所示：
     　　其中：为端口类型关键字（表征了端口可处理的不同信号类型）。为图形化建模时器件端口的自定义名称，为建模系统自动生成的端口唯一ID，为建模软件对器件端口自动生成的器件内局部名称。为方便建模，实现模型代码复用，在器件功能建模时一律使用自动生成的局部名称。在本项目研发的建模软件中，器件端口的T语言定义代码是根据器件的建模信息自动生成的。
　　② 器件内部信号关联及故障概率定义
　　器件端口是对器件外部信号进行收发处理的介质，如果要将器件内部信号的处理逻辑和端口收发的信号建立联系，就需要对器件内部信号进行定义并与相应的端口信号建立关联。在实际系统故障诊断时，器件功能往往仅对某些信号敏感，所以在建模时可以根据器件的工作特性定义相关的内部信号。为建立通用高效的功能逻辑代码规范，将器件的固有属性（如等效阻抗）和器件故障概率也在此进行定义。器件内部信号关联及故障概率定义的部分T语言语法关键字表 2所示。
　　表 2 器件内部信号及故障概率定义T语言语法关键字
T语言关键字含义T语言关键字含义VARIATE器件内部变量定义PROPERTY器件固有属性FAULT_PROBABILITY器件故障概率DEF定义起始关键字　　器件内部信号关联及故障概率定义的T语言语法结构如下：
     　　其中为内部信号变量名称， 为器件端口局部名称，为信号类型关键字，为属性名称，为数字或区间值。
　　③ 器件功能定义
　　器件的功能定义描述了器件不同功能逻辑支路（由器件结构决定的对信号产生确定约束关系的一组端口）对器件外部信号的变换、约束逻辑。器件的功能可以采用信号间的运算表达式进行描述，也可以采用T语言中的谓词（对系统特定信号变换逻辑的固定表达）语法结构进行简化描述。谓词描述的本质还是信号间的约束运算表达式。器件功能定义的T语言语法关键字组成如表 3所示。
　　表 3 器件功能逻辑建模T语言语法关键字
关键字
类型T语言
关键字含义关键字
类型T语言
关键字含义语法结构
关键字FUNCTION器件功能定义逻辑谓词FUNCTION_NORMAL功能逻辑正常逻辑谓词MAX/MIN信号最大/最小值约束数值关键字UNKNOWN信号值不可推理逻辑谓词CONNECTED端口连接逻辑谓词BREAKED端口断开连接逻辑谓词@TABLE_RESOURCE非线性离散表信号约束逻辑谓词语法结构SWITCH/CASE/ELSE/BREAK条件选择语句逻辑谓词语法结构MAP /BASE /RANGE信号变映射
语句逻辑谓词语法结构COND条件语句逻辑谓词RETURN_PORT液压回油口逻辑谓词GND电气信号负极端口　　器件功能逻辑支路定义的语法结构如下：
     　　其中为功能逻辑支路所涉及的内部信号变量，为功能定义语句。功能定义可以采用信号间的运算表达式进行表示，也可以采用T语言中的谓词语法结构对端口进行简化描述。T语言谓词语法结构包括信号映射、等效阻抗连接、条件控制、离散表约束、特殊端口谓词等。
　　为了更直观地说明上述理论设计方法，本文以舰船装备中广泛应用的电磁换向阀与负载油缸为例，详细探讨T语言建模方法的具体设计细节与实现过程。
　　表 4 电磁换向阀主要参数
参数数值最大流量/L・min-11100最大压力/MPa28响应时间/ms50-80控制信号/V24　　在舰船装备的液压系统中，电磁换向阀是一类关键且常见的液压控制器件，通常用于控制液压油流的流向，实现执行元件的运动与停止。在液压系统中，电磁换向阀的性能直接影响整个系统的工作效率与可靠性，为确保舰船装备的液压系统能够在复杂环境中稳定运行，电磁换向阀的测试性建模与诊断显得尤为重要。本节以一种典型的三位四通先导式电磁换向阀为研究对象，对其建模过程进行阐释。先导式电磁换向阀的功能主要是通过先导控制实现主阀芯的切换，其具有较低的操作力和较高的控制精度，广泛应用于对系统响应速度和功率密度要求较高的场景，例如舰船液压动力系统中的舵机控制或起重机械液压驱动装置等。下文选用力士乐公司生产的4WEH25E型号先导式三位四通电磁换向阀作为研究样本。其主要参数列于表 4中，实物外观及器件符号如图 10所示。
a) 实物图b) 器件符号　　图 10 电磁换向阀实物图与器件符号
　　换向阀由四个电气端口和四个液压端口组成。电气端口的电压决定了电磁阀阀芯的位置，从而控制液压端口的连接拓扑。当这些液压端口互连时，它们表现为液压阻抗。

图 11 电磁换向阀的流量特性曲线
　　换向阀的流量特性呈现非线性变化，受压力差、阀口面积以及液压介质密度等多种因素的影响，该三位四通换向阀端口的静态压力-流量特性可通过公式（1）表示：
　　q=C_d A√(2(p_1-p_2)/ρ)=C√(p_1-p_2 )      (1)
　　式中，q――阀口流量
　　	  	C_d――阀口流量系数
　　	  	A――阀口面积
　　	  	ρ――液压介质密度
　　	p_1, p_2――阀口两端压力
　　C――电磁阀综合流量系数
　　由液阻公式可以推出，液阻值R为：	
　　R=(p_1-p_2)/q=√(p_1-p_2 )/(C_d A√(2/ρ))            (2)
　　可以看出，换向阀的等效液压阻抗是一个非线性函数。根据实际器件数据，换向阀的流量特性曲线如图 11所示，其中q为流量，i为控制信号大小。
表 5 电磁换向阀T语言模型
　　为了对此阀进行建模，我们将其流量特性曲线离散化，创建一个查找表。该查找表在谓词结构中用于定义阀的功能。Rexroth 4WEH25E电磁换向阀的T语言模型如表 5所示，其中i_1, i_2、u_1, u_2分别为左电磁铁的电流和电压信号，i_3, i_4、u_3, u_4分别为右电磁铁的电流和电压信号，p_1, q_1为液压端口P的压力和流量信号，p_2, q_2、p_3, q_3、p_4, q_4分别为液压端口T、A、B的压力和流量信号。
　　在舰船装备中，负载油缸是一类用途广泛的液压执行器件，通常用于将液压能转化为机械能，通过直线或旋转运动实现复杂机械系统的精确控制。作为液压系统中不可或缺的重要组成部分，负载油缸在调距桨、舵机、升降装置及各类舰船机械操作机构中均有广泛应用，尤其是在需要高精度、大负载输出和高动态响应的场景中更是发挥了重要作用。
表 6 调距桨负载油缸主要参数
参数数值液压腔直径/mm450活塞杆直径/mm180活塞行程/mm200有效作用面积/m20.1336　　以某型舰船调距桨系统中的负载油缸为例，其主要功能是通过机械传动装置和动作机构调节螺旋桨桨叶的角度，从而实现不同航速条件下的最佳推进效率。表 6列出了该调距桨负载油缸的主要参数，包括液压腔直径、活塞杆直径、活塞行程及有效作用面积等关键指标。这些参数决定了负载油缸的工作性能和设计约束，实物外观如图 12所示。

图 12 负载油缸
　　调距桨负载油缸的负载力为桨叶在调定螺距下受到的海水合力，该力与调距桨桨叶螺距比（油缸活塞杆行程）成非线性关系，该型调距桨实际负载谱如图 13所示，其中f_O为负载力，x为液压缸位移。为对实际系统进行精确的建模，设备运行环境与工况条件也是需要重点描述的信息。
　　基于负载油缸的功能和负载谱，对调距桨负载油缸的功能模型建模结果如表 7所示。

图 13 调距桨负载油缸负载谱
　　其中p_1,q_1分别为无杆腔压力、流量，p_2, q_2分别为有杆腔压力、流量，〖sp〗_1为液压杆运动速度，x为液压缸位移，f_O为负载力。
　　通过这种方式，T语言不仅能够准确描述器件的功能逻辑和物理连接关系，还能有效支持系统的测试性和故障诊断。
表 7 负载油缸T语言模型
　　功能-信号关联图的T语言模型不仅能够清晰地表示系统中各个功能模块的信号传递路径，还能够展示各模块之间的耦合关系。通过该方法，将复杂机电液装备的测试性建模过程系统化，确保模型的唯一性和可重复性。具体而言，根据系统的原理图、接线图和传动图等输入信息，建立系统的基本功能单元，并通过功能-信号关联图将这些功能单元连接起来，形成完整的系统模型。在建立系统模型的过程中，需要特别注重维持装备的整体结构和组成关系。通过对各个功能单元及其信号接口的详细描述，确保模型能够准确反映实际系统的信号传递路径和耦合关系。此外，还需要开发自动化工具与设计开发环境，用于支持模型的建立和验证，这些工具不仅能够提高建模效率，还能够确保模型的准确性和一致性。
2.3 机电液系统功能约束集的T语言描述方法
　　系统功能约束集是对机电液系统在特定运行模式或控制模式下功能状态的形式化表达，它由多个信号功能组定义组成。每个信号功能组对应实际物理系统的一种特定功能或控制模式，并定义了一组关键信号（包括输入控制信号、输出动作信号等）及其取值状态。功能约束集的构建不仅是系统功能分析的重要工具，还能为故障诊断和测试性分析提供基础数据支持。
　　系统模型的器件分为源器件、执行器件以及中间器件。信号源器件即为和系统输入端口直接相连的器件，执行器件为与系统输出端口直接相连的器件，中间器件为所有端口只与系统内部的器件相连的器件。其中的三种器件定义都是相对的，是概念性上的定义，每个器件各自的分类也不是一成不变的，而是会根据模型分析过程中输入和观测的不同而变化。例如一个继电器，在控制该继电器通断的控制回路当中，继电器可以作为执行器件；而在其输出回路当中，继电器可以作为中间器件。
　　装备所实现的功能均依托于执行器的特性输出或状态来实现，所以系统的功能描述过程如下：确定特定执行器的输出或状态，然后逐步根据功能、信号关系，找出相关的中间信号与模型，最终溯源到源器件及特定的输入上；所以功能描述可以概括为：特定执行器的特定输出或状态、中间链路（模块及信号）以及功能的输入。

图 14 系统模型中的功能实现链路
　　从功能定义的角度看，功能约束集是系统运行工况识别的核心依据之一，它能够对当前系统运行模式或状态进行快速判定，并通过关联分析为系统异常状态的初步诊断推理提供依据。同时，功能约束集的明确定义为系统的功能性测试及测试性分析奠定了基础，其形式化描述已在前述章节中详细说明。
　　系统功能约束集主要为诊断测试过程中工作模式的识别、工况异常的判断和初始诊断推理提供支持，其具体的形式化定义已在前述章节中给出。根据统一建模思想，系统功能约束集也通过T语言进行描述。采用基于T语言的系统功能约束集方法，可以避免对控制系统内部程序控制逻辑（例如PLC或计算机控制程序等）进行建模。系统功能约束集T语言语法关键字如表 8所示。
　　表 8 系统功能约束集T语言语法关键字
T语言关键字含义T语言关键字含义FILE_FUNCTION_TABLE功能约束集文件标识FUNCTION_BEGIN功能定义语法块
标识FUNCTION_BOUNDARY_CONTROL_SIGNALS功能输入控制信号
定义标识FUNCTION_EXECUTION_SIGNALS功能输出信号定义
标识AUTOMATIC_CONTROL_SIGNALS可编程逻辑器件端口输出信号定义标识FUNCTION_END功能定义语法块
标识　　系统功能约束集的T语言定义语法结构如下，包括功能语义描述、定义，还包括对装备功能的定量数学描述，在系统模型中以定性的功能语义描述和定量的数学模型联合表示。
     　　
　　其中：为功能（控制模式）名称，功能文件中可定义多个不同的系统功能；为不同功能下的必要信号组合及各信号的约束状态，包括输入控制信号、输出信号和可编程逻辑控制器输出信号。具体定义语法如下：
     　　
　　其中为信号所属的器件名称、端口名称和信号类型, 为当前功能下的信号值、值区间或枚举类型。
　　功能执行逻辑链路或者依赖关系是在单一的功能约束描述的基础上，考虑系统不同功能之间的执行顺序和逻辑关系而诞生的链路。其T语言描述语法结构如下所示：
FUNCTION_LINK(funcName1, funcName2);
FUNCTION_LINK(funcName3, funcName4);
……　　其中FUNCTION_LINK为T语言关键字，该关键字表示了其括号内对应的功能名称存在相互制约关系，即系统必须先执行左边的功能之后才能执行右边的功能；funcName与信号-功能传播链路集合中的功能相对应。该链路也可以用一个更直观的有向图来表示，其基本结构如图 15所示：

　　图 15 功能执行逻辑链路
系统器件连接链路是反映系统各器件实际连接或产生相互作用的拓扑图，与系统的设计原理图高度相关。其组成的基础为系统所有器件的诊断测试模型，使用无向图表示器件之间的连接关系，具体结构和
　　图 14一致，只需要将其中有向弧改成无向弧。
　　系统测试性信息与器件测试性信息的描述方法一致，其主要的关键字与语法结构和表 8一致。系统测试性信息是与该系统各的功能故障或测试手段相关的信息，其中与故障相关的信息主要包括故障概率、常见的故障模式、故障时功能输入输出状态以及内部变量的约束关系等；与测试手段相关的信息主要包括能够诊断系统的功能是否正常的测试以及测试对应的代价。系统测试性信息与器件测试性信息最大的区别在于，器件测试性信息只可以用来判断该器件是否工作正常，而系统测试性信息可以用来判断功能是否正常，即信号-功能传播链路中的功能，若系统测试某功能正常，则功能所对应的信号-功能传播链路包含的器件都工作正常，反之则该链路中必定存在故障器件。
　　功能约束集在系统设计与分析中的一个重要应用是支持故障模式分析。通过将功能约束集与系统的运行模式结合，能够准确识别系统中可能发生的潜在故障模式，确定其对不同功能组的影响，并量化故障可能导致的功能降级或失效。这种分析不仅有助于优化系统设计，提高可靠性，还为后续测试性设计提供了关键输入。
　　功能约束集在故障树分析（FTA）中同样扮演关键角色。FTA是一种基于逻辑关系的系统失效分析方法，而功能约束集提供了对关键信号及其逻辑约束关系的清晰定义。这种定义使得故障树的构建更加直观和系统化，特别是在以下几个方面体现了功能约束集的作用：通过功能约束集，明确系统的关键功能失效条件，为顶事件的定义提供支持；基于信号功能组间的逻辑关系，功能约束集可以有效描述中间事件的触发条件及其与其他事件的逻辑联系；功能约束集为系统最小故障单元（如某个信号或器件失效）与中间事件的关联分析提供数据支持。而系统的故障树可作为分析系统测试性的基础。
2.4 分层模型的智能整合技术
　　在舰船装备测试性设计与评估中，系统层次划分是确保测试性设计科学性和可靠性的关键步骤。合理的系统层次划分不仅有助于明确各层级的功能结构属性，确保测试性设计的有效性和可靠性，同时可以降低系统的计算复杂度。本章首先对系统层次划分的需求和原则进行了深入分析，提出了系统层次划分的方法；在此基础上，本节重点探讨了分层模型的智能整合技术，旨在解决高级别系统层次分析中模型粒度过细的问题，提供一种高效、准确的系统级测试性分析方法。
　　系统可以被定义为一个具有特定功能的集合体，由若干相互作用、相互依赖的单元组成。这些单元根据功能结构的不同，可以划分为多个层级。系统层次划分的需求主要体现在以下几个方面：
　　1）功能结构的差异：实际系统中，各组成单元的功能结构属性各异，需要根据这些差异进行层次划分，以便更好地管理和分析。
　　2）测试性设计与维修需求：在测试性设计和维修诊断过程中，不同层级的单元具有不同的测试和维修需求，合理的层次划分有助于提高测试和维修的效率。
　　3）资源优化配置：通过层次划分，可以合理配置测试维修资源，确保在不同层级上实现最优的测试和维修效果。
　　国内外学者在系统层次划分方面提出了多种标准和方法。例如，我国的 GJB431-88 标准将装备划分为 8 个功能层次，从高到低依次为系统、分系统、装置、机组、单元体、组件、部件和零件。这些层次划分支持装备的研制、采购、生产和维修等活动。而在测试性设计方面，TEAMS 软件为用户提供 8 种可选的层次等级，包括系统、分系统、外场可更换单元（LRU）、内场可更换单元（SRU）、模块、子模块、元件和故障模式。
　　在不同的维修测试场合，系统层次划分的细致程度和故障单元的定位要求也不同。理想情况下，系统发生故障时，能够将故障直接隔离到最底层的电路元件，这是最佳结果。然而，实际工作中，由于工作环境、测试手段和维修费用等因素的限制，将故障隔离到最底层通常是不现实的。因此，根据现场具体情况，对系统进行自顶向下的测试分析，将故障定位到可更换的子系统或子模块，是更为实际和可靠的做法。
　　
　　图 16 三级维修体制
　　为了合理配置测试维修资源，提高测试维修工作的效率，保障系统的长期完好性和即时可用性，GJB 2961-1997 修理级别分析国家军用标准对测试维修活动进行了等级划分。该标准规定，对于海陆空军用装备均采用三级维修体制，按照自顶向下的顺序，从基层级（O 级，使用现场）、中继级（I 级，修理所）和基地级（D 级，修理厂）三个由低到高的维修级别依次展开。装备的约定层次与维修级别结合，将系统分为三个层级，从高到低依次是外场可更换单元（LRU）、内场可更换单元（SRU）和内场可更换子部件（SSRU）。常见的三级维修体制如图 16所示。
　　在基层诊断维修时，由于测试工具和诊断水平的限制，一般只需将故障定位到 LRU，通过更换可能发生故障的单元，使装备快速恢复到正常工作状态。在中继级诊断维修时，测试维修条件相对较好，一般要求将故障定位到 SRU。而在基地级诊断维修时，具备丰富的测试维修工具和高水平的诊断分析能力，一般要求对故障的 SRU 进行详细的测试与分析，将故障定位到 SSRU。
　　在进行可测试性设计过程中，层次划分的合理性直接影响到对系统的分析正确性和武器装备的可测试性、可靠性和安全性。为了确保系统具有合理的层次性，满足实际测试维修要求，并保证测试维修过程的顺利进行，在总体系统级模型的层次划分应遵循以下基本思路：
　　1）自顶向下原则：层次划分应采用自顶向下的原则，即从系统的最高层级开始，逐层向下划分。这样做可以使各层级的故障模式符合诊断逻辑，结构由粗到细，层层递进，清晰明了。当系统发生故障时，较高层级会表现出某种与之对应的征兆，较低层级则表现为某些结构单元失效或损坏。低层级子故障总是其高层级父故障的特例，而高层级父故障则是低层级子故障的概括。故障诊断推理按照自顶向下的原则，先隔离高层级单元，再定位低层级单元，将高层级的故障模式逐级向下分解。这样分解能够表现系统各层级故障模式的传播方式及其之间的因果关系，为系统可测试性设计提供指导。
　　2）逻辑关系原则：层次划分不能违背系统各部分功能结构之间的逻辑关系，应根据系统的自身功能结构复杂程度和设计分析需求进行。按照由大到小、由浅入深的逻辑，一个复杂系统的总体功能可以划分为若干个具有相对独立的子功能，实现这些子功能的各个单元构成一个层级，该层级各功能单元同时为上层级（即系统）提供服务以实现系统的整体功能。对某一层级的某个功能来说，该功能可以继续向下划分，如此递推逐级分解，最终得到由最简单的功能结构单元构成的最低层级。上下层级单元之间具有隶属关系，一个下层级单元隶属于其对应的一个上层级单元，一个上层级单元在其模型中能够体现其相应的各个下层级单元。同一层级各单元之间相互独立，互不干扰。系统各级单元的功能定义和结构界定要根据系统特性和测试维修的要求进行，以确保测试性设计层次划分的准确性与合理性。
　　3）适应诊断分析要求原则：层次划分的深度应适应诊断分析的要求。复杂装备系统一般采用分层诊断、分级维修原则，不同维修场合所要求的故障诊断精度各不相同。因此，层次分解的细化程度取决于测试维修性的分析要求，系统需要分解到的最低层级应对应于系统故障要求隔离到的最小可更换单元所在的层级。根据 GJB 2961-1997 的相关规定，一个系统划分为三个层级，分别是外场可更换单元（LRU）层级、内场可更换单元（SRU）层级和内场可更换子部件（SSRU）层级。在基层级维修时，受限于测试条件和手段，故障隔离精度要求仅到 LRU 层级，因此只需将待测系统划分到 LRU 级即可。中继级和基地级则分别需要将系统最低层级定位至 SRU 层级和 SSRU 层级。在可测试性设计过程中，同样需要如此划分系统层次，根据系统实际特性将其划分为 LRU、SRU 和 SSRU 三个层级，以确保在实际维修过程中既符合各维修级别的测试精度要求，又能缩短测试诊断时间，充分保障装备的完好性。
　　4）故障模式定义原则：各层级的故障模式应根据各层级的功能结构特性分别定义。高层级的故障是由低层级的故障传播引起的，其本质都是最低层级的故障。不同层级的故障模式表现不一致，各维修级别定位的可更换单元层级不同，各维修级别关注的故障表现形式也不一样。因此，可以将同一最低层级故障模式在不同高层级的不同故障征兆形式视为不同的故障模式，即对各个层级分别定义故障模式。不同层级本质相同的故障模式相互独立，各层级单元的故障率都能够获取。对各个层级分别进行可测试性设计，进行不同级别的测试维修活动时，只需分析与该测试级别相对应的可更换层级单元的故障模式即可。这样可以降低测试维修规模，既能准确定位故障，又能有效提高测试效率。
　　
　　图 17 系统的层次划分
　　根据前述内容可知，本方案采用的是自底向上的系统建模路线，如图 17所示，从元件级到系统级，即从局部到整体，基于器件库中预建立的器件模型，结合系统的设备/器件清单+连接关系构建整个系统的测试性模型，这样在进行高级别系统层次的分析时，模型的粒度将非常细，一是没有必要，二是会造成计算过载。所以在进行舰船总体测试性分析、大型装备的系统级故障诊断和整体性能评估时需要对模型进行整合。此技术特别适用于处理大量细粒度模型的集成，提供一个系统级的、宏观的测试性分析视角。
　　针对分析高层级系统时模型粒度过细的问题，技术核心在于智能地对低层级系统模型进行抽象和整合。例如，在分析全船的测试性时，该技术能够将如某个船上设备的零部件模型整合为一个整体。这一整合包括故障模式集合的整合和各故障模式参数的汇总计算，确保既保留了详细的故障信息，又避免了信息过载。此外，将各自建测试和自动分析得到的可用测试集进行整合，形成设备整体的测试手段。
　　在进行模型整合时，重点在于汇总和整合各故障模式的参数。这包括对故障率、故障影响、故障传播路径等关键信息的综合评估。此外，测试手段的整合不仅考虑测试的可行性和有效性，还需评估测试的代价、时间和资源消耗。这一步骤关键在于确保整合后的模型既反映了设备的实际运行状况，又适用于系统级的测试性评估。
　　为实现模型的智能整合，算法需要处理复杂的数据结构和多样的系统特性，具体可采用系统动态建模与模拟的方法来实现这一目的。系统动态建模与模拟是一种强大的工具，用于分析和预测系统行为。这种方法通过建立系统的行为模型来模拟系统的动态响应，使得能够在不同场景下预测系统的行为。在舰船装备的测试性分析中，这种方法可以应用于理解和整合来自不同系统层级的模型信息。例如，在分析某个系统时，系统动态建模能够综合考虑数百个不同的故障指标和测试点，并模拟这些指标在不同条件下的系统响应。通过这种方式，算法能够智能地识别系统组件间的相互影响和故障传播路径，优化系统级测试性分析。系统动态建模与模拟方法的优势在于其能够捕捉系统行为的动态特性和非线性相互作用，从而提供更全面和深入的分析。这种方法不仅适用于单一系统层级，还能有效处理多层级系统的整合，保证模型整合后的一致性和有效性，从而提高测试性模型的准确性和适用性。
　　智能整合技术还包括一个反馈机制，允许模型根据实际测试和运行数据进行持续优化。这意味着模型不是静态的，而是能够根据新的信息和数据进行调整。例如，如果在实际运行中发现某个故障模式比预期更常见，模型将自动调整该故障模式的权重或参数。这种动态调整能力使得模型始终与实际系统状态保持一致，确保测试性分析的准确性和可靠性。分层模型的智能整合技术还需考虑系统的动态更新。在更底层的模型发生变化和更新后，顶层模型能够适应性地调整其结构和参数。这一特性对于提高测试性模型的准确性和适用性至关重要，特别是在舰船装备这种由较多子系统与设备构成的庞大系统。
　　对于分析高级别系统层次，如全船级别的测试性分析，智能整合技术提供了一种有效的解决方案。通过将低层次的详细模型抽象成高层次的简化模型，技术能够处理更大范围的系统，同时避免了计算资源的过度消耗。这种方法不仅增加了分析的可行性，还保证了结果的精确性和实用性。该技术方案并非孤立存在，而是与现有的测试性建模方法相融合。它弥补了传统方法在处理大型复杂系统时的不足，提供了一种更全面、更高效的测试性建模方法。特别是在面对现代舰船装备这样的复杂系统时，智能整合技术成为提高测试性分析效率和准确性的关键。模型封装整合逻辑层次如图 18所示，其中虚线表征了本文模型可支持自底向上的信息反馈，支持各层独立的逻辑关系运算，更适于模块化集成。
　　
　　图 18 模型封装整合层次关系
　　下面将详细描述如何通过面向对象的模型整合与封装技术实现这一目标。通过面向对象的封装与集成方法，利用模块化思想和抽象技术来减少系统分析中的复杂度，并提升系统分析的灵活性与可扩展性。
　　1. 面向对象的封装与整合
　　面向对象的核心思想是将系统的复杂性通过对象化封装来进行简化和抽象。在系统级模型整合中，我们采用面向对象的方法，将每个系统模块视为一个“对象”，每个对象通过其接口与其他对象交互，通过统一的接口定义可以有效地组织和整合各个模块的功能和行为。具体而言，我们可以通过如下步骤进行模型的封装与集成：
　　1）对象化封装：每个系统模块（或子系统）都被封装为一个独立的对象，具有明确定义的功能、参数和接口。每个对象内部封装了对故障类型的描述、故障传播的约束条件、以及与其他模块的交互接口。
　　2）模块化集成：通过对象之间的接口交互，将各个低层次的细粒度模型集成到更高层次的系统级模型中。在高级别分析时，只通过模块的接口暴露必要的信息，而不涉及低层次的细节，从而减少计算复杂度，提升分析效率。
　　3）可扩展性与灵活性：由于采用了面向对象的封装方法，可以非常灵活地对系统进行扩展和修改。在需要对系统进行更新时，只需修改相关模块的内部实现，而不需要对整个系统模型进行重构。
　　2. 系统封装模块的定义
　　为进一步理清如何对系统进行封装，引入了系统封装模块的定义。系统封装模块是一个具有清晰功能和接口的系统级单元，它既能承载具体的功能，又能提供系统级的测试性特征。其定义为一个三元组：
　　System-Component={FAULTTYPE,CONSTRAINT,INTERFACE}
　　FAULTTYPE：故障类型的集合，描述该模块中可能发生的故障模式以及它们的影响。此集合为测试性分析提供了故障抽象和行为描述。
　　CONSTRAINT：故障传播约束条件的集合，定义了故障传播的路径、传播模式以及相关物理参数的约束。这些约束条件帮助分析故障如何在系统内部传播，并且为故障影响评估提供了依据。
　　INTERFACE：故障传播接口体集合，描述模块之间交互的接口规范和约束。这些接口定义了系统级模块之间如何通信，以及如何通过接口交换信息和进行故障传播。
　　2. 故障传播关系与约束
　　模型的设计不仅需要对每个模块的功能进行定义，还要详细描述各模块之间的故障传播关系。这一过程的核心目标是确保系统级故障诊断分析时能够准确地反映各个模块之间的相互影响。
　　在实际操作中，模块间故障传播的约束关系是通过以下几种方式体现的：
　　故障传播接口的统一性：通过在每个系统封装模块中明确接口，所有模块之间的故障信息传递都能通过标准化的接口进行，从而避免了接口不匹配带来的问题。
　　层级化的故障传播约束：故障传播关系被分层次描述，从底层设备到系统级的故障传播路径被清晰地标定。这种分层设计确保了系统级分析过程中，能够高效地处理各个层次的故障传播关系。
　　故障传播的动态绑定：故障传播的具体路径和方式是由模块的物理特性和接口定义所决定的。当系统模型发生变化时，故障传播路径会根据新的接口和物理特性进行动态调整，保证了故障传播逻辑的连续性。
　　通过这些约束条件，我们能够确保系统的每一部分在发生故障时，能够将故障传播信息有效地传递到上层，从而避免了低层故障未被系统识别或掩蔽的情况。
　　3. 模块化集成与信息反馈
　　通过自底向上的模型整合，我们能够在不同层次上进行独立的故障传播分析。每一层的模型不仅可以独立进行逻辑分析，还能通过反馈机制将分析结果向上反馈，形成有效的系统级诊断支持。
　　信息反馈机制：如图所示，模型支持自底向上的信息反馈，从底层的故障诊断到系统级分析，通过层级化的反馈机制，可以有效地整合各层的信息。每个模块独立进行故障传播分析并向上传递相关信息，最终实现系统级的故障评估与诊断。
　　模块化集成：各模块间的集成遵循统一的接口定义，确保故障传播路径能够无缝连接。在实际系统的测试性分析中，通过接口方法将不同模块组合成一个完整的系统，并在系统级别进行故障传播路径的模拟和分析。
　　4. 模块集成与高层分析
　　通过将低层级的细粒度模型抽象为系统封装模块，可以在高层次的分析过程中，只关注模块的接口，而不涉及模块的内部实现。这样一方面简化了系统级的故障诊断和性能评估，另一方面有效避免了由于模型粒度过细带来的计算过载问题。
　　在高级别的系统分析中，模型的粒度将被控制在一个合理的范围内，分析者仅通过模块的接口获取必要的信息，而不直接处理低层次的实现细节。通过这种方法，可以高效地实现系统级的测试性分析，保持良好的计算效率。
　　5. 模块之间的交互与组装
　　系统封装模块之间通过明确的接口方法进行交互。在每个系统模块的设计阶段，需要定义模块的输入输出接口，并确保接口之间的兼容性和一致性。具体操作如下：
　　接口定义：每个模块的接口需要描述如何输入数据、如何输出数据以及数据之间的转换方式。接口还需要指定数据传输的格式、时序要求等信息。
　　模块组装：在系统级分析时，通过接口方法将不同的系统封装模块组装成更大的系统模型。模块之间通过传递数据或调用函数来实现交互，整个系统的功能是通过这些模块的协作实现的。
　　接口规范与约束：模块的接口不仅仅是数据的交换，还包括对交互方式的严格规范。例如，模块之间可能存在时序关系、数据格式要求、通信协议等方面的约束，这些都需要在接口定义中明确规定。
　　6. 故障传播与系统级分析
　　在系统级的故障诊断和性能评估过程中，需要考虑故障如何在各个系统模块之间传播。通过对每个模块的故障传播约束进行建模，系统可以预测不同故障模式的影响以及故障的传播路径。具体方法如下：
　　故障传播建模：通过对系统中各个模块的故障传播路径进行建模，可以有效地分析某个故障发生后如何影响整个系统的性能。例如，在船舶系统中，某个传动装置的故障可能会影响到多个子系统的功能。通过建模故障传播路径，可以提前识别潜在的影响并做好应对准备。
　　系统级故障诊断：根据故障传播模型，可以在系统级上对故障进行诊断。通过系统模块之间的接口交互和故障传播路径的模拟，可以识别系统中最关键的故障模式，并对系统的健康状态进行评估。
　　7. 高效的测试性分析与优化
　　为了提高系统分析的效率，系统封装模块的设计需要在保证精度的同时，尽可能简化分析过程。可以通过以下方式优化分析性能：
　　信息隐蔽性：在模块设计时，通过接口定义仅暴露必要的接口信息，而将低层次的模型特性隐藏在内部。这样在高层分析时，分析人员只需要关注接口暴露的信息，避免处理过于复杂的细节。
　　层次化分析：根据模块的功能和故障模式，将系统划分为多个层级。在进行高层分析时，系统仅关注较少的层级模型，从而有效避免计算资源的浪费。通过层次化分析，不同层级的模型可以在不同的计算复杂度和细节深度下进行处理。
　　8. 层次化模型的整合与封装的主要步骤
　　步骤 1：接口匹配性检查
　　首先，根据系统的构成，建立各测试性封装模块之间的接口连接关系。对于级联模块间的故障输入/输出接口，需进行基本特性匹配性检查。检查内容包括：
　　1）机械特性：接口连接的物理尺寸、形态及其适配要求。
　　2）电气特性：电压、电流、信号类型等电气参数的匹配。
　　3）信息特性：故障信号的格式、时序要求及数据传输方式。
　　若接口特性不匹配，则需对系统进行设计变更，确保故障信息能够在各模块间顺利传递。否则，系统将无法进行有效的故障监测和定位。
　　步骤 2：故障传播关系集成
　　确定系统中各测试性封装模块的故障传播关系，基于模块间故障模式匹配情况，集成各模块的故障-测试相关矩阵，最终得到系统级的故障-测试相关矩阵。这一矩阵将作为系统故障传播分析的基础，帮助分析各故障模式对系统的整体影响。
　　步骤 3：生成故障传播关系表（Prop-Map）
　　根据集成后的故障传播关系，生成系统的故障传播关系表（Prop-Map）。该表记录了系统中各故障的传播路径，并对特殊的传播关系进行界定。Prop-Map为后续的系统测试性分析、故障诊断提供了重要依据。
　　通过分层模型的智能整合，系统级的故障诊断和性能评估将变得更加高效、可扩展，并且在处理大型复杂系统（如舰船装备总体）时能够显著提高测试性分析的可行性的运算效率。
三、舰船装备测试性模型自动分析和智能校核技术
　　装备测试性模型自动分析和智能校核技术提高装备测试性模型分析和校核的自动化与准确性。首先，通过智能校核技术，解决传统方法在处理复杂机电液设备时准确度不足和效率低的问题，确保测试性模型准确反映设备的物理结构和工作原理。其次，利用图网络分割技术，有效地区分故障区域和非故障区域，提升测试性分析的精确度。第三，测试性指标计算问题，利用图网络模型来更精确地开展测试性评价。最后，通过分析与优化过程，深入理解机电液系统的测试性能，指导系统设计的优化，从而提升装备的测试性。
3.1 测试性模型智能校核技术
　　随着机电液装备日益复杂化，传统的测试性建模方法由于依赖技术人员对系统的功能与结构进行抽象与再表达，所建立的模型没有特定的标准，给模型校核提出了较大的挑战，所以传统的测试性模型校核方法存在着准确度不足和效率低下的局限。智能校核技术的核心在于提高校核过程的自动化水平和准确性。这种技术通过高效地处理和分析机电系统的大量参数和约束条件，确保测试性模型能够准确反映设备的实际物理拓扑结构与工作原理。它不仅涉及到对设备的实际连接关系和系统工作原理的准确表达，而且还包括对机电装备的功能特点和实际工作状态的精确映射。
　　在测试性模型智能校核中，基于约束满足问题（CSP）的智能校核算法，（简称CSP算法）通过定义一系列变量（代表测试性模型中的组件和连接）和约束（代表组件间的物理和功能关系）来构建问题模型。使用改进的回溯搜索算法，结合前向检查和约束传播技术，系统地探索变量的赋值空间，以找到满足所有约束的解决方案。前向检查在分配某个变量的值时提前排除其他变量的不可行值，而约束传播则在网络中进一步传递这些限制，从而减少搜索空间和提高效率。
　　在校核机电液设备的测试性模型时，CSP算法可以识别模型中任何与实际物理布局或功能逻辑不符的部分。例如，如果模型中的某个连接与实际设备的物理接线不符，CSP算法将无法找到满足所有约束的赋值方案，从而指出模型中的不一致之处。
　　使用基于图论的解析算法来分析测试性模型中的冗余关系。这种算法通过构建图表示模型，其中节点代表组件，边代表连接或功能关联。然后，算法分析图中的路径和结构，识别不必要的冗余或缺失的必要连接。对于复杂的机电设备，解析冗余关系有助于优化测试性模型，确保其精简且高效。例如，如果模型中存在多余的连接路径，可能会导致测试时的冗余检查，通过图解析算法可以识别并建议去除这些冗余路径。
　　
　　图 19 T语言模型求解过程
　　T语言模型的约束满足求解分析过程如图 19所示，T语言本质上是一类描述性伪代码，对系统T语言模型进行解析是将复杂的模型转化成平坦的模型，简化模型的层次关系，将模型用平坦化的方程、变量、参数等来表示：分析和优化的目的是检验模型中方程的相容性，若模型子句之间不相容，则需要对模型进行检查并修正，若相容则对平坦化的子句进行简化，减少方程和变量数；代码生成器根据模型的依赖关系和数值求解包可以生成模型对应的C++语言程序代码：对生成的C++语言代码进行编译，生成可执行代码，从而实现模型的对实际系统的描述与模拟功能。
　　建立的可视化的系统T语言模型可以看成一个有向图，在上述过程中，分析解释器在将系统模型处理成平坦模型时，需要对有向图进行读取与解析。
　　有向图用符号G来表示，它是由图中顶点的有限集合V和弧的有限集合E构成的，用数学的形式表示为G=(V,E),其中弧是具有方向性的，若是从顶点V1到顶点V2,,则记为< V1, V2,>, V1称为弧头，V2称为弧尾，弧是从弧头指向弧尾的有向边。在有向图中，如果弧< V1, V2>∈E,则称V1,和V2,相关联，V1邻接到V2, V2邻接自V1。
　　有向图的存储结构有两种：邻接矩阵和邻接链表。本项目采用邻接链表实现对有向图的存储，邻接链表是一种链式存储方法，有向图中每个顶点都对应一个单链表，模型中的元件和测试点都看作有向图的顶点，因此，模型元件和测试点总数等于有向图中单链表的数量。每条单链表中的各个节点表示对应元件的后继元件，单链表中节点的数目表示该元件所有后继节点的数目总和。以一个简单实例来说明有向图的结构和邻接链表的存储形式，图 20为有向图结构实例及其对应的邻接链表，该有向图由五个节点组成，对每个节点进行数字编号，节点A邻接到节点B和E,所以对应的邻接链表中的节点编号为1和4，其他节点的邻接链表以此类推，再次不在赘述。
　　
　　图 20 有向图结构实例及其邻接链表
　　分析解释器对系统T语言模型进行解析时，需要对有向图进行遍历。有向图的遍历是指从有向图的任意一个节点出发，沿着有向边到达该图中的所有节点，且每个节点仅被访问一次。图的经典遍历算法有深度优先搜索DFS(Depth First Search)算法和广度优先搜索 BFS(Breadth First Search)算法两种，本项目采用深度优先搜索算法实现对有向图的遍历。
　　
　　图 21 系统模型深度优先搜索算法流程图
　　深度优先搜索算法的原理是从有向图的某一顶点开始，访问的任一邻接顶点w1,再从w1出发访问与w1邻接且没有被访问过的任一顶点w2,再从w2,出发继续访问下去，直至某个顶点不具有邻接顶点而不能继续向下访问：然后向后退回一步到刚刚访问过的那个顶点，观察该顶点是否具有其他未被访问的邻接顶点，若有，则访问其他任一邻接顶点，再执行上述访问过程；若没有，再退回一步观察。重复上述过程，直到有向图中所有顶点都被访问过一次。当有向图中存在闭合回路时会导致该回路中的项点被重复访问，为了避免这种情况发生，需要定义一个Visited[]数组，该数组的大小等于有向图的顶点数，数组中的元素值用来标记对应顶点是否被访问过，元素值为0表示对应顶点未被访问，元素值为1表示对应项点已经被访问。通过对有向图进行遍历，可以获取测试性模型中故障节点的可达测试点集合，为后面进行故障与测试相关矩阵分析提供了基础。深度优先搜索算法的流程图如图 21所示。
　　当所建立的系统图模型被展开为平坦化模型后，需要由约束满足性求解器来检查模型所有子句的相容性。约束条件包括布尔约束、数值约束、线性约束以及非线性约束。可采用局部搜索的方式来进行约束满足性问题的求解。
　　表 9 约束满足求解局部搜索算法伪代码
　　局部搜索的基本思路是，先任意给每个变量取一个值，得到一个赋值，然后再对这个赋值作局部的调整，从而使得被满足的子句个数越来越多，在理想情况下，最终能得到一个解。可以采用贪心搜索算法来进行解的搜索，伪代码如表 9所示。
　　在CSP求解的基础上，进一步整合设备的实际运行数据，使用统计分析和机器学习方法从中提取设备的工作特征。然后，将这些特征与CSP求解结果进行比对，检查测试性模型是否能够准确反映设备的实际工作状态和功能特性。例如，在校核一个电动泵的测试性模型时，除了确保模型满足所有物理和功能约束外，还需要考虑泵在不同负载下的运行数据。通过分析这些数据，可以验证模型是否能够准确预测泵在不同工况下的性能，从而确保测试性模型的实用性和准确性。
　　本项目的设计思路遵循自底向上的系统建模路线。从元件级到系统级，即从局部到整体的构建方法，结合器件库中预建立的器件模型，结合系统的设备/器件清单和连接关系，构建整个系统的测试性模型。基于该模型，通过修正和优化，确保每个部件和整个系统在复杂工况下的性能预测与故障诊断准确性。
　　在舰船复杂装备中，器件模型的构建是整个系统建模的基础，特别是在涉及到复杂的机电液系统时。与航空发动机领域类似，舰船装备的部件法建模也基于每个部件的工作原理，逐步建立部件模型库，进而利用这些部件模型构建整个舰船系统的功能与测试性模型。每个部件的输入输出量必须在一定程度上保持平衡契合，确保系统的稳定运行。例如，在测试舰船液压系统时，液压泵、控制阀、执行器等部件的耦合效应必须通过综合分析来平衡，以确保泵、阀和执行器之间的数据流动和故障定位的准确性。
　　舰船装备的实际工作状态通常比较复杂，部件的性能与环境条件之间的交互影响需要通过精确建模来描述。为了弥补部件模型与实际部件之间的差异，采用模型修正技术。针对每个部件的运行数据，可以通过实时数据采集与分析，提取特征参数，并对模型进行微调。例如，在测试舰船上的液压泵时，可以根据泵在不同负载下的工作数据对模型进行修正，确保模型能够准确反映泵在不同工况下的性能表现。这样，不仅能够提高测试性模型的精度，还能保证模型在复杂环境下的可靠性。
　　为提高系统模型的建模精度，可根据实际数据对部件模型的参数进行微调或增加修正系数，每一项修正都会参与系统整体的工况平衡点的求解，进而影响系统模型的全局精度。由于大部分系统都存在非线性因素，单一修正系数对部件模型的修正优化效果不能简单叠加，修正系数的不同取值组合对系统模型的影响也无法通过直观地分析获得。因此，只能通过智能优化算法对系统全局的多个修正系数的取值进行同步优化，将修正系数的取值问题视为多维空间的最优化问题。目前，用于最优值搜索的智能优化算法种类繁多，常见的有粒子群算法、遗传算法、神经网络等。粒子群算法是一种随机群体类智能优化算法，具有算法编码简单、迭代收敛迅速、求解精度高等优点。就舰船复杂机电液装备中模型参数的取值优化问题而言，粒子群算法是较为适合的优化算法。
　　
　　图 22 粒子群算法计算流程
　　粒子群算法在空间中生成一组粒子种群，每一个粒子为一个可行解。每个粒子有两个特征参数：位置和速度。将算法的求解域映射为粒子的移动空间范围，范围内粒子的位置坐标就可以代表一个可行解的取值，根据粒子的位置，可以计算该粒子的适应度。粒子的速度是在迭代时粒子位置的变化量，速度决定了粒子的搜索方向和步长。粒子的初始位置在求解空间中随机生成，通过粒子当前的速度和位置，可以计算下一迭代步的粒子位置。粒子的初始速度在一定范围内随机生成，往后每个迭代步的速度由当前速度、当前迭代步的最优粒子和该粒子在所有迭代步内的全局最优位置综合决定。粒子群算法的基本计算流程如图 22所示，具体步骤如下：
　　(1)确定求解空间和粒子速度的取值范围，在求解空间中随机生成一定数量的粒子，为每个粒子随机生成速度：
　　(2)根据定义的适应度函数，计算每个粒子的适应度，并对比找出当前迭代步最优粒子的位置Pgb和每个粒子在迭代历史中曾经到达过的最优位置Ppb:
　　(3)更新粒子的速度和位置，公式为：
　　V_i^(m+1)=ω_i V_i^m+c_1 (P_gb-P_i^m )+c_2 (P_pb-P_i^m )
　　P_i^(m+1)=P_i^m+V_i^(m+1)
　　其中：V_i^m为第i个粒子在第m迭代步的速度，P_i^m为第i个粒子在第m迭代步的位置，ω_i为第i个粒子的惯性因子，c_1为全局学习因子，c_2为自我学习因子。
　　对于更新后的速度和位置，需要判断其是否在允许的取值范围内，如果超出了允许的取值范围，应将其规整到合适的取值。
　　(4)判断是否达到了停止迭代条件，如达到一定迭代次数或满足一定收敛精度要求等，如果达到停止迭代条件，则终止迭代计算，取当前的最优粒子的位置坐标作为最优解，若没有达到，则返回第二步。
3.2 基于图网络分割的故障/非故障区域分割
　　图网络分割是一种有效的故障区域和非故障区域区分方法。它通过应用图分割算法，例如最小割算法，来确定分割点。这种方法能够提供系统组件间相互作用的详细视图，从而更精确地确定故障区域。此外，通过优化分割点的选择，可以提高测试性分析的准确性。
　　图网络分割在机电装备测试性模型中的应用旨在通过高效的算法，如最小割算法，准确划分故障区域和非故障区域。这一研究首先涉及将机电系统的构造和功能转化为图网络模型。在这个模型中，节点代表系统的各个组件，如传感器、电机，边则表示这些组件间的物理连接或功能关系。对于故障分析，重点在于如何利用图割算法有效地识别和隔离系统中的潜在故障点。这要求算法不仅要高效，还要能够处理复杂的网络结构，包括多重连接和交叉路径。
　　在实施最小割算法时，一个关键的挑战是定义适当的割的成本函数，这个函数需能准确反映出故障对系统的影响。例如，割的成本可以基于故障传播的可能性、影响的严重性或修复的难易程度。此外，算法还需要考虑到实际的工作条件和系统的动态特性，如变化的负载条件和环境因素。通过精确计算和优化这些成本函数，最小割算法能够有效地区分故障区域和非故障区域，为后续的故障诊断和系统维护提供关键信息。
　　在图网络分割的核心是应用最小割算法，使用系统中的测试（或者叫预设的机内测试以及可能的人工测点）对系统测试模型的拓扑网络图模型进行分割。在机电系统的图网络模型中，算法的目标是识别出能够最小化故障传播影响的分割点，即将网络分割成故障区域和非故障区域，同时保证割的成本最小化。这种方法特别适用于复杂的网络结构，能够有效地揭示隐藏在大量数据和复杂连接中的故障传播路径。通过最小割算法，系统能够识别关键的故障区域，这些区域是由于系统器件建模的已知失效或连接失效导致的故障点。
　　在最小割算法中，定义一个合适的割的成本函数至关重要。这个函数应考虑故障对系统的影响，如故障可能导致的停机时间、维修成本、安全风险等。例如，对于关键组件的故障，成本函数应赋予较高的权重，因为这些故障可能对整个系统产生严重的影响。成本函数的优化可以是一个持续的过程，看根据系统的模型的精细程度和历史故障记录不断调整。这包括使用机器学习算法来分析故障数据，从而更准确地评估不同故障类型的影响。
3.3 模型的自动分析与测试性指标预计
　　在建立系统模型的基础上，可以进一步对模型进行自动分析，并对测试性指标进行分析、校核，系统测试性要素有三个：故障、测试、故障与测试之间的关系，最直接的描述形式即故障与测试间的相关性矩阵模型。基于系统的信号-功能关联图模型，可以基于信号的推理与分析得到故障与测试之间的关系，即关系矩阵，进而可对系统的测试性指标进行预计。
　　根据所建立的T语言模型的特点，分析系统的功能、故障模式以及测试之间的关系时，可以推导得出以下推理原则：
　　1）当确认某故障模式存在故障时，则由该故障模式直接影响的所有未被证实的功能均应怀疑存在故障；
　　2)诊断时直接影响某功能的所有故障模式都被排除存在故障，则可推断该功能是完好的；
　　3)当确认某功能存在故障时，直接影响该功能的所有未被证实的故障模式均应怀疑存在故障；
　　4)诊断时确认某功能是完好，一直影响该功能的所有故障模式均应从怀疑中被排除；
　　5)当诊断时确认某故障模式有时影响的所有功能都是完好的，该故障模式应从怀疑中被排除。
　　
　　图 23 推理原则应用说明
　　例如图 23所示的模块，在未明确故障模式之前，为保证所有故障的完全诊断，每个功能都应对应一项测试，而加人故障模式之后，若诊断以对功能F2进行测试开始，并通过测试t2证实功能F2是完好的，根据推理原则2，可以推断故障模式1和故障模式2都没有发生，推断F1和F2也都是完好的，这样，就不需要再对功能F1和F3进行测试。
　　这些推理原则反映了约束模型中故障与测试的关系。当故障模式被引入时，它们的影响通过系统的约束方程来描述。每个器件的正常工作模式和故障模式通过一组特定的约束关系来体现系统功能的状态，因此，我们可以根据这些约束关系来推导出故障与测试之间的关联性。
　　在所建立的T语言模型，故障与测试之间的相关性不再简单依赖信号流图中的直接影响，而是依赖于各个器件和故障模式之间的约束关系。当系统某一功能存在故障时，所有相关的器件和工作正常的约束关系将导致系统状态的不相容，因此，通过求解这些约束方程，可以判断故障模式和测试之间的关系。
　　在T语言模型中，可使用类似的矩阵表示，但是矩阵的生成方式有所不同。具体来说，故障与测试之间的关系矩阵FT 依赖于器件约束方程的解。当故障模式和测试之间的约束关系相容并且正常模式和测试之间不相容，表示测试能够检测到该故障模式，否则表示无法检测。
　　矩阵的形式与传统方法类似，是一个m×n的二值矩阵FT，m表示系统或子系统共有m个故障模式，n表示共有n个测试，矩阵的行代表模型中的所有故障模式，矩阵的列代表模型中的所有测试。其中矩阵元素为0或1，代表故障是否影响测试。故障与测试之间的相关性是指两者之间的因果作用关系，故障与测试之间是互相关的，即如果故障fi发生会导致测试tj结果不正常，如果测试tj结果正常则说明故障fi没有发生。相关矩阵的具体形式如下式所示。
　　〖FT〗_(m×n)=(■(〖ft〗_11&?&〖ft〗_1n@?&?&?@〖ft〗_m1&?&〖ft〗_mn ))
　　相关矩阵是一个二值矩阵，即任一矩阵元素ft_ij的取值只能为0或1。ft_ij=1表示故障f_i与测试t_j相关，测试t_j能够检测故障f_i的发生；ft_ij=0表示故障f_i与测试t_j不相关，测试t_j不能检测故障f_i的发生。矩阵的第i行F_i=[f_i1,f_i2,?,f_in]表示所有测试对故障f_i的检测情况；矩阵的第j列T_j=〖[ft_1j,ft_2j,?,ft_mj]〗^T表示测试t_j对所有故障的检测情况，体现了t_j的检测能力。
　　相关矩阵分析是测试性分析中最关键的一步，原因在于：
　　(1)连接模型结构的每条有向边上包含许多个信号，这些信号来自于不同的故障源：
　　(2)每个模块的故障分为完全故障和功能故障两种，这两种故障的传递方式是一样的，都可以沿着有向边的方向传递到后续的节点，但他们对测试的影响是不同的，完全故障能够影响沿着有向边到达的所有测试节点中包含的测试，功能故障对测试是否有影响不仅与故障能否传播到该测试所在的测试节点有关，还要分析故障影响的信号和测试要检测的信号是否相同，因此，需要将完全故障和功能故障区分考虑：
　　(3)对于一个大型的系统，模块的数目较多，故障、信号和测试数目庞大，并且三者之间的关系十分复杂，分析与处理过程很繁琐，很难直接获取故障与测试之间的相关矩阵。
　　相关矩阵的具体构建过程如下：
　　1）获取模块与测试的约束矩阵 MT，该矩阵描述了系统中每个模块与测试之间的约束关系。
　　2）构建模块-信号-测试的相关矩阵 MST，它描述了每个模块影响的信号集与测试所依赖的信号集之间的交集关系。通过这种方式，我们可以准确地描述模块的故障模式和测试之间的联系。
　　3）故障模式与测试的相关性：结合模块与测试的约束关系，故障模式与测试的相关性可以通过如下公式表示：
　　对于完全故障模式〖ft〗_iG，其与测试t_j的相关性可以通过模块与测试之间的约束矩阵MT 来计算：
　　〖ft〗_(i(G)j)=mt_ij
　　对于功能故障模式〖ft〗_iF，其与测试t_j的相关性则不仅依赖于模块的约束，还需要考虑信号传递影响，具体公式为：
　　〖ft〗_(i(F)j)=mt_ij×m〖st〗_ij
　　故障与测试相关矩阵分析是测试性分析过程中最重要的部分，未检测故障分析、冗余测试分析、模糊组分析、测试性指标计算都是在获取相关矩阵的基础上实现的。假设模型结构中具有m个故障模拟和n个测试，现给出生成相关矩〖FT〗_(m×n)的流程如图 24所示。
　　
　　图 24 生成关系矩阵流程框图
　　根据相关性矩阵，即可分析系统中哪些故障是不可测的，哪些故障构成模糊组；结合每个故障的故障率数据，可以预计系统的故障检测率和故障隔离率。
　　未检测故障算法的实现过程是：读取相关矩阵 FT，分析相关矩阵的每个行向量，矩阵的每一行对应模型中的一个故障，循环检测相关矩阵中是否有全为零的行，如果有则表示该行对应的故障没有测试对其进行检测，该故障为未检测故障。用一维数组 undetected[2m]来描述模型中所有故障是否能够被检测，元素值为0表示数组下标对应的故障可检测，元素值为1表示对应的故障为未检测故障。算法的程序流程如图 25所示。
　　
　　图 25 未检测故障算法流程框图
　　将相关矩阵 FT 的行向量作为被研究对象，比较矩阵中不同的行向量，若存在不同的行向量其元素值是完全相同的，则称这些行向量对应的故障构成一个模糊组。模糊组算法的程序流程如图 26所示。
　　
　　图 26 模糊组算法流程框图
　　为了分析模糊组，需要定义三个一维数组：int AmbiSize[m]记录每个故障的模糊度大小；bool AddAmbi[m]记录故障是否已经属于某一个模糊组，其元素值为0表示对应的故障不属于任何模糊组；String str[m]记录每个模糊组中包含的故障名称。算法实现的过程为：首先，读取相关矩阵并初始化三个一维数组；然后，任取模型中的元件Ci,逐个对比行向量FT[i-1]与FT[i]中对应的元素，如果这两行中的元素完全相同，则将Ci(F)归入Ci(G)的模糊组里，向str[i-1]字符串中添加“Ci(F)”，Ci(F)不再与其他行向量比较，令AmbiSize[i-1]的值加1,AddAmbi[i-1]的值为1；如果行向量FT[i-1]与FT[i]的元素不完全相同，则令FT[i-1]和FT[i]分别与余下的其他行向量进行比较，并将与其相同的行向量对应的故障归入自身的模糊组，重复上述过程直到模型中所有元件的故障都经过模糊组分析。
　　故障检测率（FDR）是指在规定的条件内，用规定的方法正确检测到的故障数与被测单元发生的故障总数之比，考虑到在测试性分析和预计阶段，故障率可以视为常数，此时故障检测率又可以定义为用规定的方法正确检测到的故障模式的总概率与被测单元所有故障模式的总故障概率之比，此时故障检测率的计算方法为：
　　FDR=λ_D/λ=(∑λ_(D_i ))/(∑λ_i )×100%
　　其中，被测单元可以是系统、分系统、设备、现场可更换单元（LRU）等，测试方法可以为BIT、ATE、人工测试等，测试级别可以是内场或者外场，由设计人员在进行分析前可以指定分析范围、测试级别、所使用的测试方法等。
　　基于系统相关性矩阵，可按下式对故障检测率进行计算：
　　FDR=(∑_(f_i∈DF)?λ_i )/(∑_(f_k∈F)?λ_k )×100%
　　式中，F为系统相关性矩阵测试性模型中所描述的全部故障模式集；λ_i为第i个故障模式的故障率；DF为可测的故障集合，若故障f_i满足FS(f_i)≠?,则f_i∈DF。其中，故障模式的故障率λ_i可按下式进行计算：
　　λ_i=λ_p α_i
　　其中λ_p表示该故障模式所属的第p个组成单元/器件的故障率，可以通过其MTBF数据来计算，α_i表示该故障模式在第p个组成单元/器件中的发生频数比。
　　在对故障检测率进行计算时，可同时输出未检测的故障、模糊组、冗余测试。
　　故障隔离率（FIR）一般定义为在规定的条件内，用规定的方法正确隔离到不大于规定的可更换单元数与同一时间内检测到的故障数之比。在对装备进行故障隔离率进行分析及预计时可用以下公式进行计算：
　　FIR=λ_L/λ_D =(∑λ_(L_i ))/λ_D ×100%
　　式中，λ_D为被检测出的所有故障模式的故障率之和；λ_L为可隔离到小于等于L个可更换单元的故障模式的故障率之和；λ_(L_i )为可隔离到小于等于L个可更换单元的故障中，第i个故障模式的故障率。
　　在系统相关性矩阵基础上，可按下式对故障隔离率进行计算：
　　FIR=(∑_(?FS(f_i)≠?,?f_j?U_q (f_i∈U_q),FS(f_j)≠?,FS(f_i)≠FS(f_j))?? λ_i)/(∑_(?FS(f_k)≠?)?? λ_k )×100%
　　式中，U_q表示系统中第q个可更换单元；f_i∈U_q表示f_i为U_q中发生的故障，f_j?U_q表示f_j不是U_q中发生的故障，因此f_i和f_j隶属于不同的可更换单元；λ_i表示f_i的故障率，具体计算同FDR计算过程；FS(f_i)≠?表示f_i是可检测的故障，FS(f_i)≠FS(f_j)表示可检测f_i和f_j的测试集不同，即有测试可以区分f_i与f_j。综上，?FS(f_i)≠?,?f_i?U_q (f_i∈U_q),FS(f_j)≠?,FS(f_i)≠FS(f_j)表示任意一个可检测、且可以同任意一个与之非同一可更换单元的可测故障相隔离的故障。
　　在对故障隔离率进行计算时，与故障检测率类似，由设计人员在进行分析前可以指定分析范围、测试级别、所使用的测试方法，同时需要对隔离范围进行指定，一般来说，外场隔离到LRU层，内场隔离到故障模式层。
四、测试性建模技术与模型自动分析及智能校核技术的验证
     研制复杂机电液装备的测试性建模与交互式故障诊断一体化集成开发环境，支持机电液部件的测试性建模、模型自动分析、测试性评估与智能校核等核心功能。针对某型船水声释放回收系统建立了基于信号-功能关联图的系统模型，对本项目的舰船装备的测试性建模技术与模型自动分析和智能校核技术等两项关键技术进行验证。
4.1 测试性建模与交互式故障诊断一体化集成开发环境
　　测试性建模与诊断一体化集成开发环境包括机电液系统测试性模型建模与评估软件、交互式智能故障诊断软件和综合数据管理工具。机电液系统测试性模型建模与评估软件的功能是对机电液系统进行图形化建模和模型存储，软件包括器件功能建模、器件端口测试性建模、系统拓扑连接图形化建模、系统功能约束集建模等模块组成。交互式智能故障诊断软件通过系统模型和测量反馈数据进行故障诊断，包括传感器数据采集存储、离线冲突集生成、单步故障诊断推理、序贯测点推荐等功能模块。集成开发环境以SQLite数据库为基础，存储系统测试过程中的测试模型数据，包括基础器件模型、系统信号传递模型、故障概率模型、测点信息和测试判决信息、故障现象/征兆-信号关联模型等。另外，系统基于用户信息数据库对用户登录信息进行记录并进行用户权限管理。一体化集成开发环境的系统架构如图 27所示。

　　图 27 集成开发环境软件架构
　　针对装备测试性“设计、评估”一体化目标，结合产品研制和使用各阶段科学合理开展测试性设计与评价的实际需求，分析测试性方案论证、设计、试验、评估等所需的相关技术要求，据此开展测试性建模与诊断一体化集成开发环境的总体设计和需求分解。一体化集成开发环境的应用视图如图 28所示，支持基于标准测试性元模型库，以原理图、接线图、传动图等为输入信息的装备测试性模型自动生成，支持全面的诊断模型管理、诊断策略参数和测试偏好设置、自动测试推理、实时交互式图文引导、测试过程记录、案例管理和统计分析等功能。一体化集成开发环境可实现装备在方案设计、开发、验证与交付使用等各阶段的测试性评价和辅助维修等功能，支持装备测试性保障与产品同步设计、同步验证、同步使用。

　　图 28 一体化集成开发环境应用视图
　　4.1.1 测试性建模与评估工具
　　测试性建模与评估工具提供测试性建模、模型校核与测试性评价和基于综合代价的测点优化功能。
　　（1）测试性建模
　　测试性模型建模软件主要包括器件级测试性建模（元模型）和系统级测试性建模，主要实现对系统器件功能逻辑、器件端口信号测试性、系统拓扑连接、系统功能约束集的描述，并提供T语言语法检查等功能。主要由以下界面组成：
　　① 软件主界面：软件主界面由软件菜单栏、项目导航器、项目编辑区域组成。其中，软件菜单栏包含项目管理、设计、报表、数据管理等菜单页，其中分别包含打开项目、新建项目，器件调用与绘制、拓扑连接定义与绘制，图纸清单、元器件清单、接线表，器件库、符号库等功能按钮。项目导航栏以树形目录的方式显示项目的图纸、接线表等具体设计文件列表。项目编辑区域用于显示图纸图表清单、系统器件、拓扑连接关系等具体的项目设计内容。系统模型建模软件主界面如图 29所示。
　　
　　图 29 集成设计与测试性建模软件主界面示意图
　　② 器件功能逻辑建模：器件功能建模界面由基础信息设置、测试性信息设置和T语言功能代码编辑三个界面组成。
　　
　　图 30 器件T语言功能代码编辑界面示意图
　　③ 器件端口信号测试性建模：器件端口信号测试性建模界面：在器件数据库管理页面左侧的元件栏中选择器件名称，则可对器件端口进行编辑，可对器件的实际物理端口进行增删、功能定义、测试性定义等操作。器件端口信息测试性建模界面如图 31所示。
　　
　　图 31 器件端口信息测试性建模界面示意图
　　④ 系统拓扑连接建模：在软件主界面的项目导航器中选择项目具体子系统的拓扑连接描述图纸，软件将在右侧的编辑区域显示拓扑连接关系图，用户可在编辑区域对器件间的拓扑连接关系进行编辑。系统拓扑连接建模界面如图 32所示。
　　
　　图 32 系统拓扑连接建模界面示意图
　　⑤ 以CAD原理图等作为输入的智能化建模功能：
　　1、区分器件连接线与器件图形
　　CAD原理图中包含了大量的连接线，用于表示器件之间的电气、液压连接。为了准确识别这些连接线，系统首先需要对图纸中的线条进行分类，区分出哪些是器件连接线，哪些是其他类型的线条（如标注线、边界线等）。通过结构化图像分析方法，系统自动检测并提取可能的连接线，并根据其几何特征（如长度、方向、交点等）进行分类。首先要将符号从图纸中分离出来。原理图中的几何图元主要分为两部分：器件符号和管线。同一图纸中的两者存在以下不同：(1)几何尺寸不同。同一图纸中的器件符号分布在大小接近的近似正方形的区域内，图元相对比较密集，而且图元尺寸都较小。而管线的分布密度比较小，其几何尺寸通常比器件符号大很多。(2)几何图元不同。构成器件符号的儿何图元多种多样，既有单独的直线，又有矩形、三角形、圆等较复杂几何形体。而管线一般只由水平线和竖直线构成。根据两者的以上区别，先计算单个器件符号区域的大致尺寸，再结合构成它们的几何图元的特点，把器件符号与管线分离开来。
　　2、器件图形区域确定
　　经过上步后，将管线加入链表L中。由于管线的端点只可能与器件符号或与其他管线相连。所以，取出L中所有直线，将其端点中不与L中其它直线相交的端点存入数组P,则P中的端点均与器件符号相连。由数组P中的端点位置，可获得各个器件的大致位置。先提取两端口元件，即含有两个端口的元件。从P中取出某一端点P,搜索P中在p所在直线的延长线上且与其距离最近的一个端点，则两端点之间连接有一个双端元件。以这一对端点的中点为中心，两端点间距离为边构造一个正方形区域，提取其中的几何图元，即提取出一个器件符号。将以上两端点从数组P中删除，再取出P中的另一端点，重复以上步骤，直到数组P中满足以上条件的端点全部删除，则P中剩下的端点均与单端元件（仅含有一个接线端子的元件）相连。分别取出各个端点，在该端点所在直线的延长线一侧构造以k为边长的正方形搜索区域，即可将该单端元件提取出来。采用此种方法可确定原理图中器件符号的基本区域。
　　3、器件图形识别
　　为了提高器件图形的识别精度，系统会将识别出的器件图形与器件库中的标准模板进行匹配。将器件库中的器件符号用属性关系图表示，做成模型图，用邻接表储存并添加到模式库中。将从图纸中提取出来的器件符号同样用属性关系图表示，做成输入图。然后与模式库中的模型图进行匹配，匹配成功则该器件符号被识别出来。由于每个属性关系图对应一个器件符号，两个属性关系图的匹配，可以采用图同构的判断方法。为了减少图匹配的计算量，先通过提取图的特征过滤图模式库来避免输入图与每个模型图进行匹配。然后采用Ullman算法进行图匹配，提高匹配速度。在图匹配之前，提取图的某些特征，将模式库中不可能与输入图匹配的模型图过滤掉，只与剩余的图进行匹配。对于输入图和每个模型图，都按以上方法提取向量。在图匹配之前，先比较两个图的向量，相同则进行图同构的判断；否则，说明两个图肯定不匹配，不进行图同构判断。
　　4、器件信息补全
　　一旦器件图形与器件库中的模板匹配成功，系统会自动补全器件的详细信息，包括器件名称、型号、参数、端口信息等。这些信息将作为后续建模的基础数据，确保模型的完整性和准确性。
　　5、器件端子与模板端子对齐
　　为了确保器件端子与模板端子的正确对应，系统会自动对齐器件图形中的端子位置。通过对器件图形的几何特征进行分析，系统可以识别出每个器件的端子位置，并将其与模板端子进行匹配。
　　6、拓扑连接关系识别
　　系统会自动识别CAD图纸中的管线连接关系，包括管线与管线之间的连接关系以及管线与器件之间的连接关系。通过对连接线的几何特征进行分析，系统可以识别出每个连接点的位置，并将其与相应的器件端子进行匹配。
　　7、人工核对与确认
　　为了确保模型的准确性和一致性，设计了人工核对功能，用户可以通过交互式界面查看并核对器件信息、器件端口以及连接关系。用户可以逐个检查每个器件的详细信息，确保其与实际设备一致；同时，用户还可以检查每个连接点的连接关系，确保其与实际图纸一致。
　　原型界面如下图所示：
　　
　　图 33 CAD原理图识图功能示意图
　　⑥ 系统功能约束集的描述：系统功能约束集T语言代码编辑界面提供系统功能约束集的T语言编辑功能以及T语言语法检查功能。系统的功能建模界面如图 34所示。
　　
　　图 34 系统功能建模界面示意图
　　
　　（2）模型校核与测试性评价
　　测试性评价软件主要完成装备设计阶段测试性评价指标生成的功能。目前国内针对测试性验证主要参照GJB2547A-2012等相关国家标准，通过对装备的故障检测率、故障隔离率、虚警率等参数测算，来对装备的测试性展开评价工作。这些方法基本思想都是通过计算和相关性相关的参数对装备的测试性进行评价。本项目拟采用以综合代价函数评价为基础的测试性评价算法，实现测试性评价指标的量化表征。
　　模型校核软件具有系统模型校核功能，在测试性设计-评价的迭代过程中，完成系统最新的详细设计方案与测试性模型之间一致性的比对和更新，主要包括元模型的一致性和拓扑关系的一致性。
4.2 舰船装备测试性建模与分析及校核试验验证
　　为了验证本项目的研究内容和关键技术，本节通过某型船水声释放回收系统的实际案例，开展基于信号-功能关联图的测试性建模与分析，验证测试性模型的自动分析与智能校核技术。
　　
　　图 35 水声装置释放回收系统
　　某型船舶水声装置释放回收系统的机械机构部分如图 35所示，其总体结构如图 36所示，系统主要包括电源滤波机柜、收放控制机柜、绞车收放机构、排缆机构、导引机构、电机驱动系统、传感器系统等组成部分，主要实现将水声拖体释放入水、拖曳、回收存储等功能，工作环境恶劣、作业流程复杂，装置故障对执行水下探测任务影响极大。
　　

图 36 某型水声释放回收装置总体结构
　　在所设计开发的测试性建模与交互式故障诊断一体化集成开发环境中，以某型水声释放回收装置为例，对舰船装备的测试性建模技术与模型自动分析和智能校核技术进行测试。
　　图 37为在建模软件中对机械零部件进行建模的界面。建模内容应包括基本信息、功能子块、端口定义以及T语言模型，并支持对T语言模型进行校验。
 
 
图 37 在建模软件中进行建模操作（机械）
　　图 38在建模软件中对电气器件进行建模的操作界面。
 
 
图 38 在建模软件中进行建模操作（电气）
　　图 39在建模软件中对液压器件进行建模的操作界面。
 
 
图 39 在建模软件中进行建模操作（液压）


图 40 集成开发环境的器件库（电气器件）
　　为了高效构建系统模型，本项目开发了集成开发环境中的器件库，涵盖了电气、液压、机械等多个领域的标准器件和非标准器件。通过这些器件库，用户可以迅速选取并组装所需的系统组件，从而加速建模过程。图 40、图 41、图 42分别为器件库中的电气、液压、机械器件。

图 41 集成开发环境的器件库（液压器件）
　　这些器件库提供了预定义的器件和模块，通过简单的拖拽操作，用户即可将各个器件组件连接成完整的系统模型。

图 42 集成开发环境的器件库（机械器件）
 
 
图 43 在建模软件中对非标准器件进行建模操作
　　图 43为在建模软件中进行非标准器件的建模操作界面。对于一些不常见的器件或特殊功能模块，用户可以进行自定义创建，并将其集成到系统模型中。
 
图 44 模型校验
　　图 44在建模软件中进行模型校验的操作。通过语法检查对模型T语言的正确性进行校验，同时通过相容性检查可确保系统模型的器件功能约束与系统功能描述之间没有冲突，避免在后续分析中出现不符合实际情况的推理结果。
　　图 45、图 46展示了水声装置释放回收系统的模型结果，分别为系统拓扑连接图和功能描述。系统模型以图模型的方式进行显示与存储，是后续模型分析与测试性预计的基础。

图 45 水声装置释放回收系统建模结果（系统拓扑连接）

　　图 46 水声装置释放回收系统建模结果（功能描述）
　　在模型建立和校验之后，进行测试性指标的计算是关键步骤。通过自动分析算法，计算各项测试性评价指标，如故障检测率和故障隔离率等，图 47、图 48分别为相关的软件界面，测试性评价指标中包含器件数量、连接数量、功能数量、测试数量等系统统计信息，故障检测率、故障隔离率（隔离到1/2/3个LRU）的测试性指标。
　　
图 47 建模软件正在计算测试性评价指标
　　
图 48 测试性评价指标计算结果

[i]	LEE W S, GROSH D L, TILLMAN F A, et al. Fault tree analysis, method and applications-a review[J]. IEEE Transaction on Reliability, 1985,34(2),194-203.
[ii]	SINNAMON R M, ANDREWS J D. New approaches to evaluation fault trees[J]. Reliability Engineering and System Safety, 1997,58:89-96.
[iii]	Tanaka H, Fan L T, Lai F S, et al. Fault-tree analysis by fuzz probability[J]. IEEE Transactions on Reliability, 1983, R-32(5):453-457.
[iv]	S. Kabir, T. K. Geok, M. Kumar, M. Yazdi and F. Hossain. A Method for Temporal Fault Tree Analysis Using Intuitionistic Fuzzy Set and Expert Elicitation[J]. IEEE Access, 2020, 8:980-996.
[v]	Pavanaditya B, Yakesh B, Jayapriya J, et al. Risk evaluation of oil and natural gas pipelines due to natural hazards using fuzzy fault tree analysis[J]. Journal of Natural Gas Science and Engineering, 2019, 66:284-292.
[vi]	孙卓,胡勇.基于动态故障树的航空装备系统可靠性评估方法[J].火力与指挥控制,2022,47(05):141-146+152.
[vii]	刘若君,张幼振,姚克.基于T-S模糊故障树的煤矿坑道钻机液压动力系统故障诊断研究[J].煤田地质与勘探,2022,:1-10.
[viii]	韩露,史贤俊,翟禹尧,林云.基于多信号流图模型的导弹系统级测试性设计研究[J].电子测量与仪器学报,2021,35(05):111-119.
[ix] Paynter H M. Analysis and Design of Engineering Systems[M]. Cambridge: M. I. T. Press, 1961.
[x] Low C B, Wang D, Arogeti S, et al. Causality Assignment and Model Approximation for Hybrid Bond Graph: Fault Diagnosis Perspectives[J]. IEEE Transactions on Automation Science & Engineering, 2010, 7(3): 570-580.
[xi] 胡均平, 李科军. 机械系统开关类元件的混合键合图建模[J]. 中南大学学报(自然科学版), 2017, 48(03): 658-665.
[xii] 勇佳棋. 基于键合图的高铁牵引系统建模与故障诊断[D]. 南京航空航天大学, 2016.
[xiii] Luo X, Kezunovic M. Implementing Fuzzy Reasoning Petri-Nets for Fault Section Estimation[J]. IEEE Transactions on Power Delivery, 2008, 23(2): 676-685.
[xiv] Lefebvre D, Rachidi S, Leclercq E, et al. Diagnosis of Structural and Temporal Faults for k-Bounded Non-Markovian Stochastic Petri Nets[J]. IEEE Transactions on Systems, 2018: 3369-3381.
[xv] Keuneke A. Device representation: The significance of functional knowledge[J]. IEEE Expert, 1991, 6(2): 22-25.
[xvi] Ma J, Peng Q, Han Z. Research on Fault Diagnosis of Primary System Based on MFM and SDG[C]//. 2021 5th International Conference on Automation Control and Robots, IEEE, 2021: 98-103.
[xvii] Lind M. Modeling goals and functions of complex industrial plants [J]. Applied Artificial Intelligence. 1994, (2): 259-83.
[xviii] Wilcox N A, Himmelblau D M. The possible cause and effect graphs (PCEG) model for fault diagnosis-II Applications[J]. Computers & Chemical Engineering, 1994, 18(2): 117-127.
[xix]吴玉彬, 张合新, 吕永佳. 故障传播有向图在地面电源故障诊断的应用[J]. 现代防御技术, 2012, 40(01): 154-159.
[xx] Xiaolei W, Zhengning Y, Xuemin N, et al. Combination Multiple Faults Diagnosis Method Applied to the Aero-engine Based on Improved Signed Directed Graph[C]//. ICMIC, Harbin, China, 2019: 1-10.
[xxi] 吴国华. 基于符号有向图的核电厂故障诊断技术研究[D]. 哈尔滨工程大学, 2016.
[xxii] 赵越, 董春玲, 张勤. 动态不确定因果图用于复杂系统故障诊断[J]. 清华大学学报(自然科学版), 2016, 56(05): 530-537.
[xxiii] Deb S, Pattipati K R, Raghavan V, et al. Multi-signal flow graphs: a novel approach for system testability analysis and fault diagnosis[J]. IEEE Aerospace and Electronic Systems Magazine, 1995, 10(5): 14-25.
[xxiv] Di Peng. Testability Modelling and Optimization Technology of Ship Electrical Equipment Based on Multi-Signal Flow Diagram[J]. IOP Conference Series: Materials Science and Engineering, 2021.
[xxv] 匡翠婷. 基于多信号流图模型的诊断策略优化技术研究[D]. 郑州大学, 2015.
[xxvi] 刘允昊. 基于多信号流模型的故障诊断技术研究[D]. 哈尔滨工业大学, 2020.
[xxvii] Randall Davis. Diagnostic reasoning based on structure and behavior[J]. Artificial Intelligen-ce, 1984, 24(1-3): 347-410.
[xxviii] Reiter R. A theory of diagnosis from first principles[J]. Artificial Intelligence, 1987, 32(1): 57-95.
[xxix] Johan de Kleer, Brian C, Williams. Diagnosing multiple faults[J]. Artificial Intelligence, 1987, 32(1): 97-130.
[xxx] Johan de Kleer. An assumption-based TMS[J]. Artificial Intelligence, 1986, 28(2): 12.
[xxxi] Hamscher WC , Console L , Kleer J D . Readings in Model-Based Diagnosis[J]. Morgan Kaufmann Publishers Inc, 1992.
---------------

------------------------------------------------------------

---------------

------------------------------------------------------------

