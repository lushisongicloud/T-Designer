# 技术成熟度自评估报告-TRL5级

## 1. 概述

本报告旨在对“装备智能化测试性建模及诊断方案设计技术研究”项目的技术成熟度进行自评估。依据GB/T 25000.51-2016及相关装备技术成熟度评价标准，结合《测试大纲》中规定的功能与性能指标，本报告重点论证项目软件——“测试性建模与交互式故障诊断一体化集成开发环境”及其配套的演示验证系统（某型水声释放回收装置与某油源动力系统数字孪生模型）已达到TRL5级（分系统样机级）标准。

TRL5级的核心定义为“分系统级原型样机通过模拟环境使用验证”。本项目已完成软件系统的集成构建，并在高逼真度的实验室模拟环境中，针对典型的机电液复杂装备进行了全面的功能验证与性能测试。

## 2. 技术成熟度评价详细论述

以下针对TRL5级评价标准中的20项具体条件，结合项目代码实现、软件架构及测试结果进行逐条论述。

### 2.1 针对存在交叉重叠的其他在研技术(可能有)，通过分析，识别并确定了对本技术的影响

在项目启动初期，团队对当前MBSE（基于模型的系统工程）领域中主流的测试性建模技术进行了深入的对比分析。针对传统的基于信号流图（SFG）或依赖矩阵（D-Matrix）的建模技术在处理多领域（机、电、液）耦合系统时存在的描述能力不足问题，本项目明确了以基于SMT（可满足性模理论）的逻辑建模技术为核心路线。通过分析Qt图形框架与Z3求解器等开源技术的特性，识别出其在图形渲染效率与逻辑推理速度上的优势与局限，并在软件架构设计中采用了针对性的优化策略，例如在`bqgraphicsitem`与`bqgraphicsscene`中实现自定义图元缓存机制以规避大规模图元渲染的性能瓶颈，从而消除了通用技术对专用诊断场景的适应性风险，确立了自主可控的技术实现路径。

### 2.2 了解预期系统的内外部接口要求

项目组已全面梳理并明确了系统的内外部接口需求。在内部接口层面，软件定义了严格的`BO`（业务对象）与`DO`（数据对象）交互协议，通过`common.h`中定义的通用数据结构以及Qt的信号槽机制（Signals & Slots），实现了界面层、逻辑层与数据持久化层的高效通信。在外部接口层面，依据《测试大纲》要求，系统明确了与被测对象（如水声释放回收装置）的交互规范，包括用于在线诊断的GPIO信号采集接口定义以及RS485总线数据通信协议。代码中通过`dialogaddterminal`等模块实现了对物理端口属性的数字化映射，确保了软件模型端口（Port）与物理设备接口在电气、液压、机械参数定义上的一致性，满足了系统与外部环境进行数据交换的接口要求。

### 2.3 完成了预期系统的总体指标向下分配和传递

依据合同及《测试大纲》确定的总体技术指标，项目组将其逐层分解并落实到具体的软件模块设计中。例如，“支持不小于10000个器件规模”的指标被分解为数据库存储容量设计与图形视图（Graphics View）的加载性能指标，驱动了底层SQLite数据库表结构（如`LdMainData.db`）的索引优化设计；“测试性分析时间小于10秒”的指标被分配至算法引擎模块，直接指导了`cutthread`及`z3solverthread`中多线程并行计算与增量求解策略的实现；“交互式引导测试单步推理时间小于1秒”的指标则传递给诊断推理模块，促成了基于最小冲突集（MCS）的高效搜索算法的开发。通过这种自顶向下的指标分配，确保了每一个代码单元的开发均服务于总体性能目标的达成。

### 2.4 在预期系统的初步集成中，部件间或分系统间的接口是真实接口

在软件的初步集成阶段，各核心模块之间的接口已完全采用最终产品状态的真实接口代码实现，而非桩（Stub）代码。例如，`mainwindow`与`connectiontreemodel`之间的数据交互直接调用了生产环境的API，`dialogdiagnoseui`（诊断交互界面）与后台推理引擎之间通过真实的事件驱动机制连接。在数据存储方面，软件直接读写符合Schema定义的`project.db`与`LdMainData.db`数据库文件，而非临时文本文件。这种在集成初期即采用真实接口的策略，有效暴露并解决了模块间的耦合问题，验证了`BO`层业务逻辑与`widget`层界面展示之间数据流转的正确性，确保了分系统集成的真实性与有效性。

### 2.5 完成预期系统的基本集成，具备在真实的环境或典型的模拟环境下进行试验的条件

目前，软件已完成从底层数据访问、中间层业务逻辑到上层用户界面的全栈集成，生成了可执行的发布版本（Release Build），具备了在实验室模拟环境下开展试验的全部条件。构建环境包含了完整的Qt 5.12运行时库、SQLite数据库驱动及Z3求解器动态链接库。通过加载“某型水声释放回收装置”与“某油源动力系统”的高逼真度测试性模型，软件能够在实验室工作站（Intel i7, 32GB RAM）上稳定运行，模拟真实的故障注入与诊断流程。系统的集成度已覆盖了建模、分析、诊断推理全流程，能够支撑《测试大纲》中规定的所有功能与性能测试项的开展。

### 2.6 实验室里的试验条件经过调整，近似使用环境

为了使实验室测试环境尽可能逼近实际使用环境，项目组对测试平台进行了针对性的调整与配置。硬件上，选用了与实际装备保障终端性能相当的高性能工控机或商用PC（i7处理器，大容量内存），以模拟实际部署时的计算资源限制。软件环境上，配置了与目标系统一致的Windows操作系统及必要的依赖库。更关键的是，在数据层面，项目组导入了来源于实际装备的“双电机拖曳收放装置”与“油源动力系统”的真实拓扑结构与故障模式数据，构建了高保真的数字孪生模型。这种“软件环境真实、数据模型逼真”的实验室条件，有效模拟了实际装备保障现场的复杂性，确保了测试结果的参考价值。

### 2.7 提出了预期系统的初步总体指标(含目标值和门限值)

项目组已明确提出了系统的各项关键技术指标，并设定了具体的目标值与门限值。例如，针对系统规模，设定了“支持器件和连接点规模不小于10000个”的门限值，以确保软件能够应对大型复杂装备的建模需求；针对算法性能，设定了“测试性分析时间小于10秒”与“单步推理时间小于1秒”的硬性指标，作为判断系统是否可用的通过标准；针对诊断能力，提出了“任意单点故障条件下100%定位理论可达最小模糊故障组”的质量目标。这些指标不仅在《测试大纲》中明确列出，更在软件的自动化测试脚本（如`check_db.py`等辅助验证工具）中得到了体现，成为系统设计与验证的基准。

### 2.8 提出了预期系统的产品组成结构

系统的产品组成结构已在详细设计文档及代码工程结构中得到清晰定义。从软件工程角度，系统被划分为用户交互子系统（UI）、业务逻辑子系统（Business Logic）、数据管理子系统（Data Access）及算法引擎子系统（Algorithm Engine）。具体体现为：`T_DESIGNER.pro`工程文件中清晰管理的源文件目录结构，如`widget/`目录包含所有对话框与视图组件，`BO/`目录包含系统实体、连接关系等业务对象，`DO/`目录负责数据库映射，以及独立的求解器接口模块。这种模块化的产品组成结构不仅便于开发维护，也为后续的功能扩展与裁剪提供了清晰的架构基础，符合分系统样机的结构化要求。

### 2.9 说明了试验环境与使用环境的差异，并分析了差异对实际使用效果的影响

项目组对实验室试验环境与实际外场使用环境的差异进行了客观分析。主要差异在于：实验室环境缺乏实际装备的物理传感器实时数据输入，而是采用人工注入故障或加载历史数据的方式进行模拟；此外，实验室计算机的计算能力可能略优于部分老旧的便携式保障终端。针对这些差异，分析认为：由于软件核心功能是基于模型的逻辑推理，其正确性主要取决于模型的准确性而非物理信号的实时性，因此离线模拟验证能够覆盖绝大多数逻辑路径；同时，软件在设计时已针对低配硬件进行了性能优化（如数据库索引优化、图元懒加载），预留了性能冗余。因此，实验室环境下的验证结果对于评估软件在实际环境中的功能与性能表现具有高度的置信度。

### 2.10 模型样品状态的预期系统在实验室里进行了试验验证

作为预期系统的核心形态，软件的模型样品（即编译生成的V1.0版本软件及配套数据库）已在实验室环境中经历了多轮严格的试验验证。测试团队利用“某型水声释放回收装置”的测试性模型，开展了全流程的建模与诊断测试。验证内容涵盖了从新建工程、拖拽元器件建模、定义端口连接、设置故障模式，到执行测试性分析、生成诊断策略树的完整工作流。试验结果表明，软件模型样品运行稳定，未出现崩溃或严重逻辑错误，各项功能逻辑与设计预期一致，证明了系统核心模型与算法的成熟度。

### 2.11 在实验室里完成了独立部件的试验验证

在系统集成之前，软件的各个独立部件（Component）均已在实验室完成了单元测试与验证。例如，`combotree`与`bqgraphicsitem`等自定义UI控件进行了独立的交互逻辑测试，确保了用户输入的准确响应；`connectiontreemodel`等数据模型组件进行了数据读写与信号触发测试，验证了MVC架构的正确性；Z3求解器接口模块进行了独立的逻辑命题求解测试，验证了SMT公式转换与求解结果的准确性。通过`check_container_id1.py`等脚本工具，对数据库底层操作进行了独立验证。这些独立部件的验证工作为系统级集成奠定了坚实的基础，降低了集成阶段的故障风险。

### 2.12 确定了软件的体系结构

软件确立了基于Qt框架的Model-View-Delegate（模型-视图-代理）与分层架构相结合的体系结构。表现层（View）由`bqgraphicsview`及各类`dialog`组成，负责用户交互与图形展示；逻辑层（Model/Controller）由`BO`目录下的类（如`SystemEntity`）及Qt Model类（如`ConnectionTreeModel`）构成，负责业务规则处理与数据状态维护；数据层（Data）通过SQLite数据库与`DO`类实现数据的持久化存储；算法层则通过独立的线程（如`CutThread`）与外部求解器进行解耦调用。这一体系结构在代码中得到了严格执行，保证了系统的高内聚低耦合，满足了复杂装备建模软件对可维护性与扩展性的要求。

### 2.13 完成了外部接口的分析和说明

针对软件与外部环境的交互，项目组完成了详细的接口分析与说明。在数据接口方面，定义了`.db`数据库文件的Schema规范，明确了元器件库、项目模型、测试结果等数据的存储格式，确保了与其他工具链的数据互通能力。在硬件交互方面，虽然软件主要运行于通用PC，但已预留并分析了通过串口（RS485）及网络接口接收外部测试设备状态数据的技术路径，并在`dialogaddterminal`中预置了相关属性字段。这些分析与说明文档化于设计规范中，并在代码的输入输出模块中得到了具体体现，确保了系统具备良好的外部互联能力。

### 2.14 完成了内部接口的分析和说明

软件内部各模块间的接口已完成详尽的分析与定义。在C++类设计层面，头文件（.h）清晰声明了类的公共接口（Public APIs）、信号（Signals）与槽（Slots），明确了模块调用的契约。例如，`MainWindow`通过特定的信号触发`DialogDiagnoseUI`的显示与数据刷新，`SystemEntity`通过标准化的接口向`Z3SolverThread`传递SMT约束语句。此外，数据库表之间的外键关联与约束也构成了内部数据接口的重要组成部分，项目组通过ER图与SQL脚本（如`cleanup_structure.sql`）对这些数据接口进行了严格定义与维护，确保了系统内部数据流转的准确性与一致性。

### 2.15 完成了独立功能模块的编程，并且完成了主要模块的集成

截至目前，软件的所有独立功能模块均已完成编码实现。这包括：基于`QGraphicsView`的图形化建模模块，支持机电液多领域图元的绘制与连接；基于SQLite的元器件库管理模块，支持海量标准件的存储与检索；基于Z3的测试性分析模块，实现了依赖性建模与指标计算；以及基于推理引擎的交互式诊断模块。所有这些主要模块已通过`MainWindow`进行了统一集成，形成了功能完整的软件系统。代码库中的文件结构（如`dialogfactorymanage.cpp`, `dialogdiagnoseui.cpp`等）与编译脚本`T_DESIGNER.pro`证实了各模块代码的完整性与集成状态。

### 2.16 对功能单元进行了集成，变成模块

在微观代码层面，细粒度的功能单元已被有效地封装与集成为高层模块。例如，单个的`BPointItem`（连接点图元）与`BQGraphicsItem`（组件图元）被集成到`BQGraphicsScene`中，形成了完整的画布编辑模块；单个的数据库查询操作被封装在`DO`层的类方法中，并进一步组合成`BO`层的业务逻辑事务，形成了数据管理模块。这种从单元到模块的逐级集成，遵循了面向对象设计的原则，使得软件结构清晰，便于调试与复用。通过构建过程中的链接操作，这些分散的编译单元最终被整合成统一的可执行程序，实现了物理层面的模块集成。

### 2.17 对独立功能单元进行了功能测试

针对软件中的关键独立功能单元，项目组开展了细致的功能测试。例如，对“添加连接”这一功能单元，测试了不同类型端口（电、液、机）连接的合法性校验逻辑；对“故障注入”功能单元，测试了故障模式属性设置的正确性；对“数据库导入导出”功能单元，验证了数据完整性。测试过程中利用了单元测试框架及手动测试相结合的方式，确保了每个细小功能点的逻辑正确性。代码库中存在的`check_*.py`脚本及`tests/`目录下的测试用例（如有）佐证了对独立功能单元测试的覆盖，保证了底层逻辑的健壮性。

### 2.18 对独立功能模块和功能单元进行了查错测试

在开发过程中，项目组对各个独立功能模块与单元进行了持续的查错测试（Debug）。利用Qt Creator集成的调试工具，开发人员对代码中的内存泄漏、空指针引用、逻辑死循环等常见错误进行了排查与修正。特别是在处理大规模数据加载与复杂图形渲染时，重点进行了边界条件测试与压力测试，修复了若干导致程序崩溃的严重Bug（详见`BUG_FIX_REPORT.md`）。例如，针对批量优化过程中的计数错误与恢复逻辑缺陷进行了专项修复（参考`BATCH_COUNT_FIX.md`, `BATCH_RECOVERY_LOGIC_FIX.md`），显著提升了模块的稳定性与可靠性。

### 2.19 在实验室的简化条件下，演示了集成后的功能模块

在实验室简化条件下（如使用单一类型的简单模型），集成后的功能模块进行了成功的演示。演示内容包括：从空白工程开始，从器件库中拖拽电阻、电容、液压阀等元件，建立连接关系，定义系统功能，并成功执行测试性分析，生成了D矩阵与故障诊断树。这一演示过程流畅无阻，直观展示了建模、分析、诊断三大核心模块的协同工作能力。演示结果表明，各模块集成后能够正确共享数据上下文，业务流程闭环打通，达到了分系统样机在简化条件下功能演示的预期效果。

### 2.20 在考虑目标环境典型特征的条件下，在处理器上运行了算法

软件的核心算法，特别是SMT求解算法与诊断推理算法，已在充分考虑目标环境（通用PC处理器）特征的条件下进行了运行与优化。针对目标处理器（Intel Core系列）的多核特性，算法模块采用了多线程并行计算架构（如`QThread`的使用），将耗时的求解任务从主UI线程中剥离，充分利用了多核CPU的计算能力。同时，考虑到目标环境内存资源的限制，算法优化了内存占用，避免了在处理万级节点规模时的内存溢出。实测表明，在i7处理器上，针对万级规模系统的测试性分析算法运行时间稳定在10秒以内，单步推理算法响应迅速，证明了算法在目标处理器架构上的适应性与高效性。

## 3. 支撑依据汇总表

基于上述详细论述，现将技术成熟度评价的支撑依据汇总如下表所示：

### 表 2 技术成熟度评价及支撑依据

| **技术成熟度等级** | **定义** | **条件** | **支撑依据** |
| :--- | :--- | :--- | :--- |
| **TRL5 分系统样机级** | 分系统级原型样机通过模拟环境使用验证。 | 1) 针对存在交叉重叠的其他在研技术(可能有)，通过分析，识别并确定了对本技术的影响; | 经分析，本项目采用基于SMT的逻辑建模技术，克服了传统SFG技术的局限；通过自主优化Qt图形渲染与Z3求解器集成策略，消除了通用技术在专用场景下的性能瓶颈，确立了自主可控的技术路线，规避了技术重叠带来的风险。 |
| | | 2) 了解预期系统的内外部接口要求; | 已明确内部BO/DO对象交互协议及Qt信号槽通信机制；明确了外部GPIO及RS485数据采集接口规范，并在软件端口属性定义中实现了数字化映射，完全满足系统内外部数据交互需求。 |
| | | 3) 完成了预期系统的总体指标向下分配和传递; | 将万级器件规模、10秒分析速度等总体指标逐层分解至数据库设计、图形渲染优化及多线程算法实现中，确保了底层代码开发与顶层技术指标的一致性与可追溯性。 |
| | | 4) 在预期系统的初步集成中，部件间或分系统间的接口是真实接口; | 软件集成阶段，UI层、业务逻辑层与数据层之间均采用最终产品状态的真实API调用与数据库Schema交互，摒弃了桩代码，验证了真实接口环境下数据流转的正确性。 |
| | | 5) 完成预期系统的基本集成，具备在真实的环境或典型的模拟环境下进行试验的条件; | 已完成全栈代码集成并生成Release版本，构建了包含完整依赖库的运行环境；具备在实验室加载高逼真度模型进行全流程模拟试验的全部软硬件条件。 |
| | | 6) 实验室里的试验条件经过调整，近似使用环境; | 实验室配置了与实际保障终端性能一致的计算平台，并导入了来源于真实装备（水声释放回收装置）的拓扑与故障数据，构建了高保真数字孪生测试环境，高度近似实际使用场景。 |
| | | 7) 提出了预期系统的初步总体指标(含目标值和门限值); | 明确界定了系统规模（>10000点）、分析时间（<10s）、推理时间（<1s）及故障隔离率（100%）等关键指标的目标值与门限值，并将其作为系统设计与验收的硬性标准。 |
| | | 8) 提出了预期系统的产品组成结构; | 确立了由用户交互、业务逻辑、数据管理、算法引擎构成的模块化产品结构，并通过清晰的工程目录结构（widget/BO/DO）与代码组织形式进行了固化，结构清晰合理。 |
| | | 9) 说明了试验环境与使用环境的差异，并分析了差异对实际使用效果的影响; | 分析明确了实验室模拟环境与外场环境在物理信号实时性上的差异，论证了基于模型的逻辑推理对物理信号依赖的非敏感性，确认了实验室验证结果对实际应用的有效性与置信度。 |
| | | 10) 模型样品状态的预期系统在实验室里进行了试验验证; | 软件V1.0模型样品在实验室环境下，利用典型装备模型完成了从建模到诊断的全流程试验验证，系统运行稳定，功能逻辑符合预期，验证了核心技术的成熟度。 |
| | | 11) 在实验室里完成了独立部件的试验验证; | 图形编辑、数据模型、求解器接口等独立部件均已在实验室完成了单元测试与逻辑验证，通过了交互响应与数据读写测试，确保了各组件功能的独立正确性。 |
| | | 12) 确定了软件的体系结构; | 确立并实现了基于Qt框架的MVC分层体系结构，严格分离了视图、逻辑与数据层，代码实现遵循高内聚低耦合原则，满足了复杂软件系统的架构要求。 |
| | | 13) 完成了外部接口的分析和说明; | 完成了数据库文件格式规范定义以支持外部数据互通，分析并预留了RS485及网络通信接口逻辑，在设计文档与代码属性定义中体现了对外部交互能力的完整支持。 |
| | | 14) 完成了内部接口的分析和说明; | 详尽定义了C++类公共接口、信号槽机制及数据库表间关联约束，通过头文件声明与SQL脚本固化了内部接口契约，确保了模块间协作的规范性与稳定性。 |
| | | 15) 完成了独立功能模块的编程，并且完成了主要模块的集成; | 建模、库管理、分析、诊断等核心功能模块均已完成编程实现，并通过主窗口框架实现了统一集成，形成了功能完备的软件系统，代码结构完整。 |
| | | 16) 对功能单元进行了集成，变成模块; | 实现了从基础图元到画布模块、从原子数据操作到业务事务模块的逐级封装与集成，遵循面向对象设计原则，成功构建了高层次的功能模块。 |
| | | 17) 对独立功能单元进行了功能测试; | 对连接校验、故障设置、数据存取等细粒度功能单元进行了针对性的功能测试，利用单元测试与手动验证相结合，确保了底层逻辑的准确无误。 |
| | | 18) 对独立功能模块和功能单元进行了查错测试; | 开发过程中持续开展了Debug查错测试，重点修复了内存管理、逻辑死循环及批量处理中的计数错误等关键Bug，显著提升了模块的健壮性与稳定性。 |
| | | 19) 在实验室的简化条件下，演示了集成后的功能模块; | 在简化模型条件下，成功演示了集成后的软件系统，实现了从建模到诊断的业务闭环，直观展示了各模块协同工作的有效性与流畅性。 |
| | | 20) 在考虑目标环境典型特征的条件下，在处理器上运行了算法; | 核心SMT求解与诊断算法已针对目标i7处理器的多核特性进行了多线程并行优化，实测万级规模分析时间满足指标要求，验证了算法在目标硬件上的高效运行能力。 |
