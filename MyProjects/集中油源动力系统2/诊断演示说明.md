# 集中油源动力系统 - 故障诊断演示说明

## 系统简介

集中油源动力系统主要包括：
- **油源动力系统控制柜**：负责对液压泵站的启动、停止、用油申请调度、应急用油调度等进行控制
- **配电系统**：为系统提供AC220V电源
- **液压泵站**：负责向1#~4#收放系统提供液压动力

## 已构建的诊断功能

### 功能1：液压泵站启动功能（推荐演示）
**诊断步骤**：6步完整测试
**演示亮点**：展示从供电到压力建立的完整启动链路

#### 测试流程：
1. **测试AC220V供电是否正常**
   - 预期结果：使用万用表测量控制柜输入端电压，应为AC 220V±10%
   - 测试失败→故障：供电系统故障（电源滤波器或配电系统异常）
   
2. **测试控制电源输出是否正常**
   - 预期结果：测量控制电源输出端DC24V电压，应为24V±5%
   - 测试失败→故障：控制电源模块故障
   
3. **检查PLC1（主控）运行指示灯及通讯状态**
   - 预期结果：PLC RUN灯常亮，COMM灯闪烁，本地操作单元能读取PLC状态
   - 测试失败→故障：PLC主控器故障或程序异常
   
4. **通过本地操作单元发送泵站启动命令，检查电机启动信号输出**
   - 预期结果：PLC输出电机启动信号，对应输出点有DC24V电压
   - 测试失败→故障：PLC输出模块故障或软启动器未收到信号
   
5. **检查液压泵站电机是否启动运行**
   - 预期结果：电机正常运转，无异响，软启完成信号返回，电机过载信号未报警
   - 测试失败→故障：电机或液压泵机械故障
   
6. **观察压力传感器读数，检查系统压力是否建立**
   - 预期结果：系统压力在30秒内上升到设定值（10-15MPa），压力传感器读数稳定
   - 测试失败→故障：液压系统泄漏或泵效率低
   - 测试通过→结论：液压泵站启动功能正常，系统工作正常

#### 演示建议路径：
- **正常路径**：所有6个测试依次通过 → 系统正常
- **故障路径1**：测试1失败 → 快速定位供电系统故障
- **故障路径2**：前3个测试通过，测试4失败 → 定位PLC输出模块问题
- **故障路径3**：前5个测试通过，测试6失败 → 定位液压系统泄漏

---

### 功能2：液压系统压力控制功能
**诊断步骤**：4步测试
**演示亮点**：展示闭环控制系统的诊断思路

#### 测试流程：
1. **检查压力传感器信号是否正常**
   - 预期结果：传感器输出4-20mA信号，PLC能正确读取压力值，与机械压力表对比误差<5%
   - 测试失败→故障：压力传感器故障或信号线路故障
   
2. **检查PLC对比例调节阀的控制输出**
   - 预期结果：PLC模拟量输出0-10V可调，对应阀开度0-100%
   - 测试失败→故障：PLC模拟量输出模块故障
   
3. **检查比例调节阀动作是否正常**
   - 预期结果：手动调节输出电压，阀开度相应变化，系统压力可调
   - 测试失败→故障：比例调节阀机械卡滞或线圈故障
   
4. **观察压力控制稳定性**
   - 预期结果：设定压力12MPa，实际压力波动<±0.3MPa，无振荡
   - 测试失败→故障：PLC控制参数不当或系统管路振动
   - 测试通过→结论：压力控制功能正常

---

### 功能3：液压油质量监测功能
**诊断步骤**：3步传感器检测
**演示亮点**：展示多传感器协同监测

#### 测试流程：
1. **检查污染度传感器读数**
   - 预期结果：传感器显示污染度等级，读数稳定，符合ISO 4406标准要求（≤18/16/13）
   - 测试失败→故障：液压油污染度超标或传感器故障
   
2. **检查液压油含水量**
   - 预期结果：水分传感器读数<200ppm（饱和度<10%），无报警
   - 测试失败→故障：液压油含水量超标
   
3. **检查油品传感器综合指标**
   - 预期结果：粘度指数正常，酸值<0.5mgKOH/g，无金属颗粒报警
   - 测试失败→故障：液压油老化或系统磨损
   - 测试通过→结论：液压油质量正常，监测功能正常

---

## 操作步骤

1. 在T-Designer中打开项目：**集中油源动力系统**
2. 进入【故障诊断】页面
3. 在功能列表中选择要诊断的功能（推荐先演示"液压泵站启动功能"）
4. 点击【开始诊断】按钮
5. 系统显示当前测试的描述和预期结果
6. 根据实际情况点击：
   - 【测试通过】- 该测试项正常，系统推荐下一个测试
   - 【测试失败】- 该测试项异常，系统给出故障定位
   - 【跳过测试】- 暂时跳过该测试（慎用）
7. 重复步骤6，直到完成诊断（系统给出最终故障定位或正常结论）

---

## 数据统计

- **功能总数**：5个（3个已构建诊断树，2个待扩展）
- **诊断树总数**：3棵
- **诊断节点总数**：42个
  - 测试节点：13个
  - 故障节点：16个
  - 分支节点：13个

---

## 技术架构

- **数据存储**：集中油源动力系统.db（SQLite数据库）
- **诊断引擎**：DiagnosisEngine（基于决策树遍历）
- **数据表**：
  - `Function`：功能定义表
  - `diagnosis_tree`：诊断树表
  - `diagnosis_tree_node`：诊断树节点表
- **构建工具**：`tools/setup_oil_power_system_diagnosis.py`

---

## 扩展建议

如需为"供油申请调度功能"和"系统保护功能"构建诊断树，可以修改Python脚本添加对应的决策树构建函数。

**脚本位置**：`D:\SynologyDrive\Project\T_DESIGNER\tools\setup_oil_power_system_diagnosis.py`

**扩展方法**：参考现有的 `create_diagnosis_tree_1_pump_startup()` 等函数，按照类似结构添加新的诊断树构建函数。

---

*生成日期：2025-11-10*  
*工具版本：T-Designer Diagnosis System v2.0*
